webpackJsonp([16],{1288:function(e,t,n){e.exports={controllerViews:{CheckIn:n(2543),ChatBox:n(2542),EndorseBanner:n(2545)},stores:{ChatBoxStore:n(2096),CheckInStore:n(2283),EndorsementStore:n(1909),ProfileStore:n(526),StreamingInfoStore:n(536),StickerStore:n(2097)}}},1316:function(e,t,n){e.exports=n(315)},1329:function(e,t,n){"use strict";var i=n(3)("Touchdown:loadUserAction"),r=n(525);function o(e,t,n){i("loading user info"),e.getStore(r).isLoaded()?n&&n():e.service.read("user",{},{},function(t,i){t||!i?e.dispatch("RECEIVE_USER_INFO_FAILURE",t):e.dispatch("RECEIVE_USER_INFO_SUCCESS",i),n&&n(t)})}o.displayName="loadUser",e.exports=o},1342:function(e,t,n){"use strict";var i=n(1910),r=n(1908),o={MAX_CHEERS:2147483647,subscribedEvents:[],asyncTasks:[],isConnected:!0,getRef:function(){return"undefined"!=typeof window&&window?(window.firebaseRef||(window.firebaseRef=new Firebase(i.host)),window.firebaseRef):null},isAuthed:function(){var e=this.getRef(),t=e&&e.getAuth&&e.getAuth(),n=Math.floor(Date.now()/1e3);return!(!t||t.expires<n)},authWithToken:function(e){var t=this.getRef();return new r(t&&e?function(n,i){t.authWithCustomToken(e,function(e,t){e?i("error"):n(t)})}:function(e,t){t("error")})},unauth:function(){var e=this.getRef();e&&e.unauth()},getInfoWithUUID:function(e){var t=this.getRef(),n=this;return new r(e&&t?function(i,r){n.goOnline(),n.asyncTasks.push(!0),t.child("streamingInfo/"+e).once("value",function(e){n.asyncTasks.pop(),n.goOffline(),e?i(e.val()):r("error")})}:function(e,t){t("error")})},getUpdatedInfoWithUUID:function(e,t,n){var i,r=this.getRef(),o=this,s=["moderationType","endTime"],a="streamingInfo/"+e;if(e&&r){i=function(e){o.goOnline(),o.asyncTasks.push(!0);var i=r.child(a+"/"+e).on("value",function(i){if(i){var r={};r[e]=i.val(),t&&t(r)}else n&&n("error")});o.subscribedEvents.push({path:a+"/"+e,eventName:"value",callback:i})};for(var c=0;c<s.length;c++)i(s[c])}else n&&n("error")},addFavorWithUUID:function(e){var t=this.getRef(),n="streamingInfo/"+e+"/favor";return new r(function(i,r){e&&t?t.child(n).transaction(function(e){return null===e?e:e+1},function(e,t,n){e?r(e):i()}):r(new Error("no uuid or firebase ref be found"))})},getOptionsWithCheckInId:function(e){var t,n=this.getRef();return new r(function(i,r){e&&n?n.child("checkIn/"+e).once("value",function(e){t=e.val(),n.child("checkInType/"+t.type).once("value",function(e){t.type=e.val(),i(t)})}):r(new Error("no checkin id or firebase ref be found"))})},getUpdatedCheckInUsersWithUUID:function(e,t){var n,i=this.getRef(),r="streamingInfo/"+e+"/checkIn";e&&i?(this.goOnline(),this.asyncTasks.push(!0),n=i.child(r).on("value",function(e){e?t&&t(null,e.val()):t&&t(new Error("operation failure"),null)}),this.subscribedEvents.push({path:r,eventName:"value",callback:n})):t&&t(new Error("invalid data"),null)},getUpdatedFavorWithUUID:function(e,t){var n,i=this.getRef(),r="streamingInfo/"+e+"/favor";e&&i?(this.goOnline(),this.asyncTasks.push(!0),n=i.child(r).on("value",function(e){e?t&&t(null,e.val()):t&&t(new Error("operation failure"),null)}),this.subscribedEvents.push({path:r,eventName:"value",callback:n})):t&&t(new Error("invalid data"),null)},getMessagesWithUUID:function(e,t){var n,o=this.getRef(),s=this;return new r(e&&o?function(r,a){n=o.child("lives/"+e+"/messages").orderByChild("time").limitToLast(i.messagePerBatch),t&&(n=n.endAt(t)),s.goOnline(),s.asyncTasks.push(!0),n.once("value",function(e){if(s.asyncTasks.pop(),s.goOffline(),e){var t=[],n=e.val();e.forEach(function(e){t.push(e.key())}),r({keys:t,messageMap:n})}else a("error")})}:function(e,t){t("error")})},getAddedMessagesWithUUID:function(e,t,n,i){var r,o=this.getRef(),s="lives/"+e+"/messages";e&&o?(this.goOnline(),this.asyncTasks.push(!0),t=t||1,r=o.child(s).orderByChild("time").startAt(t).on("child_added",function(e){if(e){var t=e.key(),r=e.val();n&&n({key:t,message:r})}else i&&i("error")}),this.subscribedEvents.push({path:s,eventName:"child_added",callback:r})):i&&i("error")},getUpdatedMessagesWithUUID:function(e,t,n,i){var r,o=this.getRef(),s="child_changed",a="lives/"+e+"/messages";e&&o?(this.goOnline(),this.asyncTasks.push(!0),t=t||1,r=o.child(a).orderByChild("time").startAt(t).on(s,function(e){if(e){var t=e.key(),r=e.val();n&&n({key:t,message:r})}else i&&i("error")}),this.subscribedEvents.push({path:a,eventName:s,callback:r})):i&&i("error")},getAddedPromotedMessagesWithUUID:function(e,t,n){var i,r=this.getRef(),o="lives/"+e+"/messages";e&&r?(this.goOnline(),this.asyncTasks.push(!0),i=r.child(o).orderByChild("promoted").startAt(1).limitToLast(1).on("child_added",function(e){e?t&&t({promotedMessage:e.val()}):n&&n("error")}),this.subscribedEvents.push({path:o,eventName:"child_added",callback:i})):n&&n("error")},getLastPromotedMessageWithUUID:function(e){var t,n,i=this.getRef(),o=this;return new r(e&&i?function(r,s){o.goOnline(),o.asyncTasks.push(!0),i.child("lives/"+e+"/messages").orderByChild("promoted").startAt(1).limitToLast(1).once("value",function(e){o.asyncTasks.pop(),o.goOffline(),e?(e.forEach(function(e){t=e.key()}),n=e.val(),r({promotedMessage:n&&n[t]})):s("error")})}:function(e,t){t("error")})},getUpdatedCheersWithUUID:function(e,t,n){var r,o=this.getRef(),s=this,a="streamingInfo/"+e+"/teams/"+t+"/cheers";e&&o&&("left"===t||"right"===t)?(this.goOnline(),this.asyncTasks.push(!0),r=o.child(a).on("value",function(e){if(e){if(s.lastCheerUpdateTime&&Date.now()-s.lastCheerUpdateTime<1e3*i.cheerUpdateInterval)return;s.lastCheerUpdateTime=Date.now(),n&&n(null,{side:t,cheers:e.val()})}else n&&n(new Error("operation failure"),null)}),this.subscribedEvents.push({path:a,eventName:"value",callback:r})):n&&n(new Error("invalid data"),null)},checkInWithUuid:function(e,t,n){var i,r=this.getRef();e&&r&&(i="streamingInfo/"+e+"/checkIn/users/",t&&r.child(i+t).transaction(function(e){return Math.max((e||0)-1,0)}),n&&r.child(i+n).transaction(function(e){return(e||0)+1}))},cheerWithUUID:function(e,t){var n,i=this.getRef(),r=this;e&&i&&("left"===t||"right"===t)&&(n="streamingInfo/"+e+"/teams/"+t+"/cheers",i.child(n).transaction(function(e){if(!(e>=r.MAX_CHEERS))return(e||0)+1}))},cleanupWithUUID:function(e,t){var n,i=this.getRef(),r=[];i&&(this.subscribedEvents.forEach(function(t){t=t||{},e&&t.path&&-1===t.path.indexOf(e)?r.push(t):(n=i.child(t.path))&&n.off(t.eventName,t.callback)}),this.subscribedEvents=r,this.asyncTasks=[],t&&this.goOffline())},goOnline:function(){Firebase&&(this.isConnected||(Firebase.goOnline(),this.isConnected=!0))},goOffline:function(){Firebase&&this.isConnected&&(this.asyncTasks&&this.asyncTasks.length>0||(Firebase.goOffline(),this.isConnected=!1))}};e.exports=o},1357:function(e,t){e.exports=function(e,t){var n={};if(!e||!t)return n;for(var i=0,r=t.length;i<r;i++){var o=t[i];e.hasOwnProperty(o)&&(n[o]=e[o])}return n}},1359:function(e,t,n){"use strict";var i=n(3)("ProfileV2:ProfileActions"),r=n(1329),o=n(525),s=n(526),a=n(1357),c={getProfile:function(e,t,n){if(i("getProfile",t),e.getStore(o).isLoaded()){if(!e.getStore(o).isSignedIn()&&!e.getStore(o).isRecognized()||e.getStore(s).isLoaded())return e.dispatch("OPEN_PROFILE_FAILURE",new Error("user is signed out or profile is loaded.")),n&&n();var l=a(t,["resource","imgsize","guid","guids","timeout"]);e.service.read("ProfileService.profile",l,{},function(t,r){if(i("getProfile data",r),t||!r){var o=t||new Error("No data returns");return e.dispatch("OPEN_PROFILE_FAILURE",o),n&&n()}e.dispatch("OPEN_PROFILE_SUCCESS",r),n&&n()})}else e.executeAction(r,{},function(t){if(t)return e.dispatch("OPEN_PROFILE_FAILURE",t),n&&n();e.executeAction(c.getProfile,{},n)})}};e.exports=c},1416:function(e,t){var n={};n.isLiveOn=function(e){return"number"==typeof e&&(0===e||e>Date.now())},n.isBelowIE9=function(){if("undefined"==typeof window)return!1;var e=window.navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])<=9},n.redirectToSignIn=function(e){var t,n;"undefined"!=typeof window&&(t=window&&window.location&&window.location.href||""),t&&e&&(n=e.replace("[REDIRECT_URL]",t),window.location.href=n)},e.exports=n},1442:function(e,t,n){e.exports=n(1732)},1466:function(e,t,n){"use strict";e.exports=function(e,t,n){return e.dispatch("UPDATE_VIDEO_INFO_SUCCESS",t),n&&n()}},1475:function(e,t){e.exports=function(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}},1716:function(e,t){e.exports={AA:{nl:1},AB:{ad:1,ald:1,kl:1},AC:{jd:1,nl:1},AD:{ald:1,jd:1,jd_2:1},AE:{jd:1},AF:{ad:1,ad_2:1},AG:{ad:1,jd:1,mr:1},AH:{nl:1},AI:{ad:1,mr:1},AJ:{ald:1},AK:{ald:1,kl:1},AL:{jl:1,mr:1},AM:{ald:1,jl:1,jl_2:1},AN:{ad:1,ad_2:1,jd:1,jd_2:1,jl:1,jl_2:1,kl:1,kl_2:1,kl_3:1,kl_4:1,nl:1,nl_2:1},AP:{ad:1,jl:1},AR:{ad:1,ald:1,jd:1,jl:1,jl_2:1,jl_3:1,jl_4:1,mr:1},AS:{ad:1,jd:1,jl:1},AT:{ad:1,ad_2:1},AU:{jd:1,kl:1,nl:1,nl_2:1},AV:{nl:1},AX:{ald:1},AY:{ad:1,ald:1,kl:1,nl:1},AZ:{ald_2:1,jd:1,jd_3:1},A:{ad:1,"kl_2_6-16":1,mr:1},BA:{ad:1,jd:1,jl:1,kl:1,kl_2:1,mr:1,nl:1},BB:{jd:1},BD:{nl:1},BE:{ald:1,ald_2:1,jd:1},BI:{jd:1},BL:{ald:1,jd:1},BO:{ald:1,kl:1},BR:{mr:1},BS:{kl:1},BU:{jl:1,mr:1,nl:1},BV:{ald:1},BW:{ad:1},BY:{ad:1,ad_2:1,jd:1},B:{ald:1,jl:1,jl_2:1,mr:1},CA:{ad:1,ad_2:1,jd:1,jd_2:1,jd_3:1},CB:{jd:1},CC:{kl:1},CE:{jd:1,jd_2:1,jl:1,kl:1,nl:1},CH:{jl:1,kl:1,nl:1},CI:{kl:1},CJ:{ald:1},CK:{ald:1},CL:{jl:1},CO:{ad:1,jd:1,nl:1},CR:{ald:1,jd:1,kl:1,nl:1},CS:{ald:1},CT:{ald:1,nl:1},CY:{ad:1},C:{jl:1,kl:1,"kl_6-16":1,mr:1},DA:{ald:1},DC:{mr:1},DD:{mr:1},DE:{ad:1,jl:1,jl_2:1,jl_3:1},DF:{nl:1},DI:{ald:1,kl:1},DL:{mr:1},DM:{ald:1},DO:{jl:1},DP:{jd:1},DQ:{ald:1},DR:{jd:1},DS:{ald:1},DU:{jd:1,kl:1},DW:{ald:1,mr:1},D:{ad:1,ald:1,mr:1},EA:{ad:1,jl:1,kl:1,nl:1},EB:{jl:1},EC:{nl:1},ED:{kl:1},EE:{jl:1},EF:{jd:1},EG:{ad:1,kl:1},EL:{jd:1,jl:1,"kl(2)":1,kl:1},EM:{jl:1},EN:{jd:1,jl:1,jl_2:1,jl_3:1,nl:1},EO:{ad:1,ad_2:1},EP:{kl:1},ER:{ad:1,ad_2:1,ad_3:1,ad_4:1,jd:1,jd_2:1,jl:1,jl_2:1,kl:1,kl_2:1},ES:{ad:1,ad_2:1,ald:1,jd:1,kl:1},ET:{ad:1,jd:1},EU:{nl:1},EW:{ald_2:1,jd_2:1,jd_3:1,kl:1},EX:{ald:1,jd:1,jd_2:1,jd_3:1,jd_4:1},EY:{kl:1},E:{ald:1,jl:1,"kl_2_6-16":1,"kl_3_6-16":1,"kl_6-16":1},FE:{ad:1,ad_2:1,ad_3:1},FF:{ad:1,ad_2:1,mr:1},FI:{jd:1},FO:{jd:1,mr:1},FR:{ad:1},FT:{ald_2:1},FU:{mr:1},F:{jl:1,kl:1,"kl_6-16":1},GA:{jl:1,kl:1},GE:{ad:1,ad_2:1,jd:1,jd_2:1},GG:{ald:1},GH:{jd:1},GI:{kl:1,nl:1},GL:{mr:1},GM:{ald:1},GN:{kl:1},GO:{jd_2:1},GR:{ad:1,jd:1,jl:1},GS:{ald:1},GU:{ad:1},G:{jl:1,"kl_6-16":1},HA:{jl:1,nl:1},HE:{ald:1,jd:1},HF:{nl:1},HI:{ad:1,nl:1},HM:{ald:1},HN:{nl:1},HO:{jd:1},HR:{nl:1},HW:{jd:1},H:{ad:1,ald:1,kl:1,"kl_2_6-16":1},IA:{ad:1,jl:1,kl:1},IB:{ald:1},IC:{ad:1,ad_2:1,ad_3:1,jd:1,mr:1,nl:1},ID:{ad:1},IE:{ad:1,ad_2:1},IF:{ad:1,jd:1,nl:1,nl_2:1},IG:{ald:1},IL:{jd:1,nl:1},IM:{mr:1,nl:1,nl_2:1},IN:{ad:1,jl:1,jl_2:1,jl_3:1,kl:1,kl_2:1,nl:1},IO:{jl:1},IP:{nl:1},IR:{jd:1},IS:{ad:1,ad_2:1},IT:{ad:1,jd:1,jl:1,nl:1},IU:{ald:1},IV:{jl:1,jl_2:1},IX:{ad:1},IZ:{kl:1},I:{kl:1},JA:{ald:1},JE:{ald:1,kl:1},JU:{mr:1},JZ:{ald:1},J:{"kl_6-16":1},KA:{kl:1},KE:{ald:1,jd:1,kl:1},KF:{jd:1},KI:{kl:1,nl:1},KL:{jd:1},KM:{nl:1},KN:{ald:1},KO:{jd:1},KR:{kl:1},KW:{ald:1,ald_2:1},KY:{kl:1},KZ:{jd:1},K:{ald:1,jl:1},LA:{ad:1,ad_2:1,ald:1,kl:1,nl:1},LC:{jd:1},LD:{ald:1},LE:{ad:1,jl:1,kl:1},LF:{ad:1},LG:{jd:1},LI:{ad:1,ad_2:1,ad_3:1,jl:1,jl_2:1},LK:{ald:1},LL:{ald:1,jl:1},LM:{kl:1},LO:{ad:1},LR:{kl:1},LT:{kl:1,nl:1},LU:{ald:1,jl:1,nl:1},LW:{jd:1},LX:{jd:1},LY:{jd:1,kl:1},L:{ad:1,ald:1,jd:1,"jd_1_6-16":1,"jd_2_6-16":1,"jd_3_6-16":1,mr:1,mr_2:1},MA:{ad:1,ad_2:1,jl:1,jl_2:1},MB:{kl:1,nl:1},ME:{jd:1,nl:1,nl_2:1},MI:{kl:1},ML:{mr:1},MM:{ad:1,ad_2:1},MN:{jd:1},MO:{jd_2:1},MP:{jl:1},MU:{ad:1,ad_2:1},MW:{kl:1},MY:{ald:1},M:{ald:1,"jd_1_6-16":1,"jd_2_6-16":1,mr:1},NA:{ad:1,nl:1,nl_2:1},NC:{ald:1},ND:{jd:1,jl:1,kl:1,nl:1,nl_2:1,nl_3:1},NE:{ad:1,jl:1,jl_2:1,mr:1,nl:1},NG:{"ald(2)":1,ald:1,nl:1},NH:{ald:1},NI:{ald:1,nl:1},NJ:{ald:1},NK:{jd:1},NM:{jd:1},NO:{jd:1},NQ:{nl:1},NS:{kl:1},NT:{ad:1,ald:1,jd:1,jd_2:1,jl:1,jl_2:1,kl:1},NU:{"ald(2)":1,ald:1},NV:{nl:1},NX:{ald:1},NY:{ald_2:1},NZ:{jl:1,jl_2:1},N:{ald:1,"jd_6-16":1,jl:1},OA:{ald:1,mr:1},OB:{ad:1,jl:1},OC:{ald:1},OD:{kl:1},OF:{ad:1,ald:1,jd:1},OG:{jd:1},OJ:{jl:1},OL:{ad:1,jl:1,kl:1},OM:{jl:1,kl:1},ON:{jd:1,jl:1,nl:1,nl_2:1},OO:{mr:1},OP:{ad:1,jl:1},OR:{jd:1,mr:1},OS:{ald:1,jl:1},OT:{jd:1,jl:1},OU:{jd:1},OV:{ald:1},OW:{jd:1,jl:1,jl_2:1},OX:{ald:1,jd:1},OZ:{ad:1,ad_2:1},O:{ad:1,ald:1,jl:1},PA:{ad:1},PE:{kl:1},PH:{ad:1},PI:{nl:1},PL:{ad:1,nl:1},PM:{jl:1},PO:{ald:1,ald_2:1,jd:1,kl:1},PP:{kl:1,nl:1},PR:{ad:1},PS:{jd:1},PT:{nl:1},PU:{ad:1,ald:1},P:{ad:1,"jd_6-16":1},QR:{nl:1},QU:{mr:1},QV:{ald:1},Q:{"ald_6-16":1,"ald_6-25":1},RA:{ad:1,ald:1,jd:1,jd_2:1,kl:1,kl_2:1},RB:{nl:1,nl_2:1},RC:{nl:1},RD:{ald:1,jl:1},RE:{jd:1,jl:1,kl:1,kl_2:1,mr:1,nl:1},RG:{jd:1,jl:1},RH:{nl:1},RI:{ad:1,jd:1,jl:1},RK:{mr:1,nl:1},RL:{ald:1,ald_2:1},RM:{nl:1},RN:{jd:1},RO:{ald:1,jl:1,kl:1},RP:{ald:1,nl:1},RR:{ald:1,jl:1,jl_2:1},RS:{ad:1,jd:1,nl:1},RT:{ald:1,nl:1},RU:{ad:1,kl:1,nl:1},RV:{jd:1},RY:{jl:1,kl:1},RZ:{jd:1},R:{ald:1,jd:1,"jd_6-16":1,nl:1},SA:{jd:1},SB:{jl:1},SC:{kl:1,mr:1,nl:1},SD:{ad:1},SE:{nl:1},SH:{ald_2:1,ald_5:1},SI:{ad:1,jd:1},SK:{kl:1},SL:{mr:1},SM:{kl:1},SO:{ad:1,jd:1},SP:{ad:1},SQ:{mr:1},SS:{jd:1},ST:{ad:1,ad_2:1,"ald(2)":1,ald:1,jd:1,kl:1},SU:{ad:1,ad_2:1,ald:1,jl:1,kl:1,nl:1},SV:{ald:1},S:{ald:1,"jd_1_6-16":1,"jd_2_6-16":1,kl:1},TA:{ad:1,jd:1,jd_2:1,kl:1,nl:1},TB:{ald:1},TC:{nl:1},TE:{ad:1,ad_2:1,jd:1,jl:1,jl_2:1,jl_3:1,kl:1},TG:{nl:1},TH:{jd:1},TI:{ad:1,ald:1,mr:1,nl:1,nl_2:1},TK:{jl:1},TL:{kl:1,nl:1,nl_2:1},TM:{nl:1},TO:{ad:1,jd:1,jl:1,jl_2:1,jl_3:1,jl_4:1,nl:1},TR:{ald:1,ald_2:1,ald_3:1},TS:{ald:1,kl:1},TT:{ad:1,kl:1},TU:{ad:1,ad_2:1,jl:1,kl:1},TW:{jd:1},TY:{ald:1,jl:1,nl:1,nl_2:1},TZ:{jd:1},T:{"ald_2_6-16":1,"ald_4_6-16":1,"ald_6-16":1,"ald_7-8":1,jd:1},UA:{jl:1,mr:1,nl:1,nl_2:1},UB:{ad:1,ald:1,jd:1},UC:{ald:1},UD:{jd:1},UE:{ad:1,jl:1,kl:1},UI:{ald:1,kl:1},UJ:{jd:1},UM:{ald_2:1,jd:1,jd_2:1},UN:{jl:1},UO:{kl:1},UP:{ad:1,kl:1},UR:{ad:1,jd:1,jd_2:1,jl:1,kl:1,kl_2:1,nl:1,nl_2:1,nl_3:1},US:{ad:1,ad_2:1,nl:1,nl_2:1},UT:{ad:1,jl:1,kl:1},UX:{jd:1},U:{"ald_2_6-16":1,"ald_6-16":1,"ald_6-25":1,jd:1,mr_2:1},VA:{jd:1},VE:{ad:1,jl:1,kl:1},VI:{ad:1,ald:1},VL:{jd:1},VS:{ald:1},VU:{jd:1},VY:{ald:1},V:{ald:1,"ald_6-16":1,jl:1,mr_2:1},WA:{ald:1,mr:1,mr_2:1},WE:{jd:1,nl:1},WI:{ad:1,ald:1,jl:1,kl:1},WN:{ald:1,jd:1,jl:1},WO:{jl:1,kl:1},WS:{ald:1,nl:1},WY:{ald:1,mr:1},W:{ad:1,ald:1,"ald_6-16":1,jd:1,jl:1,kl:1},XA:{"ald(2)":1,ald:1},XC:{ald:1},XE:{jd:1},XP:{kl:1},X:{"ald_2_6-16":1,"ald_6-16":1},YC:{ald:1},YE:{jd:1},YF:{jd:1},YI:{kl:1},YL:{kl:1},YO:{mr:1},YP:{jd:1},YR:{ald:1},YS:{jd:1,jd_2:1},Y:{jl:1,kl:1},ZA:{ald:1,kl:1},ZE:{ald:1},ZI:{kl:1},ZO:{nl:1},ZR:{ald:1},ZZ:{kl:1,kl_2:1},Z:{ald:1,"ald_2_6-16":1,"ald_6-16":1,nl:1},xh:{jd:1}}},1717:function(e,t){e.exports={"B.V.M.":1,CFRE:1,CLU:1,CPA:1,"C.S.C.":1,"C.S.J.":1,"D.C.":1,"D.D.":1,"D.D.S.":1,"D.M.D.":1,"D.O.":1,"D.V.M.":1,"Ed.D.":1,"Esq.":1,II:1,III:1,IV:1,"Inc.":1,"J.D.":1,"Jr.":1,"LL.D.":1,"Ltd.":1,"M.D.":1,"O.D.":1,"O.S.B.":1,"P.C.":1,"P.E.":1,"Ph.D.":1,"Ret.":1,"R.G.S":1,"R.N.":1,"R.N.C.":1,"S.H.C.J.":1,"S.J.":1,"S.N.J.M.":1,"Sr.":1,"S.S.M.O.":1,USA:1,USAF:1,USAFR:1,USAR:1,USCG:1,USMC:1,USMCR:1,USN:1,USNR:1}},1718:function(e,t,n){var i="https://s.yimg.com/wv/images/alphatar_",r=".jpg",o=n(1716),s=n(1717),a=n(328),c=n(1719),l=n(1720).latinise;function u(e,t){if(!e)return null;t=c(t);var n,i=e.split(" ")||[],r=[];if(i.length){var l=a(i,function(e){return!s.hasOwnProperty(e.toUpperCase())||!s.hasOwnProperty(e)})||[];if(!l.length)return r;n=(l[0].charAt(0)+(l.length>1?l[i.length-1].charAt(0):"")).toUpperCase()}if(n&&o.hasOwnProperty(n)){var u=o[n];r.push(t),r.push(n);var h=Object.keys(u),d=function(e){if(!e)return 0;for(var t=0,n=0,i=e.length;n<i;n++)t+=e.charCodeAt(n)*(n+1);return t}(e)%h.length;r.push(h[d])}return r}e.exports={getAlphatar:function(e,t){if(!e)return null;var n=u(l(e),t)||[];return n.length||(n=u(l(e.split(" ")[0]),t)),n.length>0?[i,n.join("_"),r].join(""):null}}},1719:function(e,t,n){var i=n(325),r=n(1729),o=[10,50,72,80,96,100,120,150,250,720,1024],s=100;e.exports=function(e){var t=e,n=e;if((!t||t<0)&&(t=s),"string"==typeof t){var a=e.indexOf("x");a>-1&&(n=parseInt(t.slice(0,a),10),t=n)}return o[t]||(t=r(o,function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}))-n<0&&(t=o[i(o,t,0)+1]||t),[t,"x",t].join("")}},1720:function(e,t,n){var i=n(210),r={"Á":"A","Ă":"A","Ắ":"A","Ặ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ǎ":"A","Â":"A","Ấ":"A","Ậ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ä":"A","Ǟ":"A","Ȧ":"A","Ǡ":"A","Ạ":"A","Ȁ":"A","À":"A","Ả":"A","Ȃ":"A","Ā":"A","Ą":"A","Å":"A","Ǻ":"A","Ḁ":"A","Ⱥ":"A","Ã":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ḃ":"B","Ḅ":"B","Ɓ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ć":"C","Č":"C","Ç":"C","Ḉ":"C","Ĉ":"C","Ċ":"C","Ƈ":"C","Ȼ":"C","Ď":"D","Ḑ":"D","Ḓ":"D","Ḋ":"D","Ḍ":"D","Ɗ":"D","Ḏ":"D","ǲ":"D","ǅ":"D","Đ":"D","Ƌ":"D","Ǳ":"DZ","Ǆ":"DZ","É":"E","Ĕ":"E","Ě":"E","Ȩ":"E","Ḝ":"E","Ê":"E","Ế":"E","Ệ":"E","Ề":"E","Ể":"E","Ễ":"E","Ḙ":"E","Ë":"E","Ė":"E","Ẹ":"E","Ȅ":"E","È":"E","Ẻ":"E","Ȇ":"E","Ē":"E","Ḗ":"E","Ḕ":"E","Ę":"E","Ɇ":"E","Ẽ":"E","Ḛ":"E","Ꝫ":"ET","Ḟ":"F","Ƒ":"F","Ǵ":"G","Ğ":"G","Ǧ":"G","Ģ":"G","Ĝ":"G","Ġ":"G","Ɠ":"G","Ḡ":"G","Ǥ":"G","Ḫ":"H","Ȟ":"H","Ḩ":"H","Ĥ":"H","Ⱨ":"H","Ḧ":"H","Ḣ":"H","Ḥ":"H","Ħ":"H","Í":"I","Ĭ":"I","Ǐ":"I","Î":"I","Ï":"I","Ḯ":"I","İ":"I","Ị":"I","Ȉ":"I","Ì":"I","Ỉ":"I","Ȋ":"I","Ī":"I","Į":"I","Ɨ":"I","Ĩ":"I","Ḭ":"I","Ꝺ":"D","Ꝼ":"F","Ᵹ":"G","Ꞃ":"R","Ꞅ":"S","Ꞇ":"T","Ꝭ":"IS","Ĵ":"J","Ɉ":"J","Ḱ":"K","Ǩ":"K","Ķ":"K","Ⱪ":"K","Ꝃ":"K","Ḳ":"K","Ƙ":"K","Ḵ":"K","Ꝁ":"K","Ꝅ":"K","Ĺ":"L","Ƚ":"L","Ľ":"L","Ļ":"L","Ḽ":"L","Ḷ":"L","Ḹ":"L","Ⱡ":"L","Ꝉ":"L","Ḻ":"L","Ŀ":"L","Ɫ":"L","ǈ":"L","Ł":"L","Ǉ":"LJ","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ń":"N","Ň":"N","Ņ":"N","Ṋ":"N","Ṅ":"N","Ṇ":"N","Ǹ":"N","Ɲ":"N","Ṉ":"N","Ƞ":"N","ǋ":"N","Ñ":"N","Ǌ":"NJ","Ó":"O","Ŏ":"O","Ǒ":"O","Ô":"O","Ố":"O","Ộ":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ö":"O","Ȫ":"O","Ȯ":"O","Ȱ":"O","Ọ":"O","Ő":"O","Ȍ":"O","Ò":"O","Ỏ":"O","Ơ":"O","Ớ":"O","Ợ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ȏ":"O","Ꝋ":"O","Ꝍ":"O","Ō":"O","Ṓ":"O","Ṑ":"O","Ɵ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Õ":"O","Ṍ":"O","Ṏ":"O","Ȭ":"O","Ƣ":"OI","Ꝏ":"OO","Ɛ":"E","Ɔ":"O","Ȣ":"OU","Ṕ":"P","Ṗ":"P","Ꝓ":"P","Ƥ":"P","Ꝕ":"P","Ᵽ":"P","Ꝑ":"P","Ꝙ":"Q","Ꝗ":"Q","Ŕ":"R","Ř":"R","Ŗ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ȑ":"R","Ȓ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꜿ":"C","Ǝ":"E","Ś":"S","Ṥ":"S","Š":"S","Ṧ":"S","Ş":"S","Ŝ":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṩ":"S","ẞ":"SS","Ť":"T","Ţ":"T","Ṱ":"T","Ț":"T","Ⱦ":"T","Ṫ":"T","Ṭ":"T","Ƭ":"T","Ṯ":"T","Ʈ":"T","Ŧ":"T","Ɐ":"A","Ꞁ":"L","Ɯ":"M","Ʌ":"V","Ꜩ":"TZ","Ú":"U","Ŭ":"U","Ǔ":"U","Û":"U","Ṷ":"U","Ü":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ǖ":"U","Ṳ":"U","Ụ":"U","Ű":"U","Ȕ":"U","Ù":"U","Ủ":"U","Ư":"U","Ứ":"U","Ự":"U","Ừ":"U","Ử":"U","Ữ":"U","Ȗ":"U","Ū":"U","Ṻ":"U","Ų":"U","Ů":"U","Ũ":"U","Ṹ":"U","Ṵ":"U","Ꝟ":"V","Ṿ":"V","Ʋ":"V","Ṽ":"V","Ꝡ":"VY","Ẃ":"W","Ŵ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẁ":"W","Ⱳ":"W","Ẍ":"X","Ẋ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ẏ":"Y","Ỵ":"Y","Ỳ":"Y","Ƴ":"Y","Ỷ":"Y","Ỿ":"Y","Ȳ":"Y","Ɏ":"Y","Ỹ":"Y","Ź":"Z","Ž":"Z","Ẑ":"Z","Ⱬ":"Z","Ż":"Z","Ẓ":"Z","Ȥ":"Z","Ẕ":"Z","Ƶ":"Z","Ĳ":"IJ","Œ":"OE","ᴀ":"A","ᴁ":"AE","ʙ":"B","ᴃ":"B","ᴄ":"C","ᴅ":"D","ᴇ":"E","ꜰ":"F","ɢ":"G","ʛ":"G","ʜ":"H","ɪ":"I","ʁ":"R","ᴊ":"J","ᴋ":"K","ʟ":"L","ᴌ":"L","ᴍ":"M","ɴ":"N","ᴏ":"O","ɶ":"OE","ᴐ":"O","ᴕ":"OU","ᴘ":"P","ʀ":"R","ᴎ":"N","ᴙ":"R","ꜱ":"S","ᴛ":"T","ⱻ":"E","ᴚ":"R","ᴜ":"U","ᴠ":"V","ᴡ":"W","ʏ":"Y","ᴢ":"Z","á":"a","ă":"a","ắ":"a","ặ":"a","ằ":"a","ẳ":"a","ẵ":"a","ǎ":"a","â":"a","ấ":"a","ậ":"a","ầ":"a","ẩ":"a","ẫ":"a","ä":"a","ǟ":"a","ȧ":"a","ǡ":"a","ạ":"a","ȁ":"a","à":"a","ả":"a","ȃ":"a","ā":"a","ą":"a","ᶏ":"a","ẚ":"a","å":"a","ǻ":"a","ḁ":"a","ⱥ":"a","ã":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ḃ":"b","ḅ":"b","ɓ":"b","ḇ":"b","ᵬ":"b","ᶀ":"b","ƀ":"b","ƃ":"b","ɵ":"o","ć":"c","č":"c","ç":"c","ḉ":"c","ĉ":"c","ɕ":"c","ċ":"c","ƈ":"c","ȼ":"c","ď":"d","ḑ":"d","ḓ":"d","ȡ":"d","ḋ":"d","ḍ":"d","ɗ":"d","ᶑ":"d","ḏ":"d","ᵭ":"d","ᶁ":"d","đ":"d","ɖ":"d","ƌ":"d","ı":"i","ȷ":"j","ɟ":"j","ʄ":"j","ǳ":"dz","ǆ":"dz","é":"e","ĕ":"e","ě":"e","ȩ":"e","ḝ":"e","ê":"e","ế":"e","ệ":"e","ề":"e","ể":"e","ễ":"e","ḙ":"e","ë":"e","ė":"e","ẹ":"e","ȅ":"e","è":"e","ẻ":"e","ȇ":"e","ē":"e","ḗ":"e","ḕ":"e","ⱸ":"e","ę":"e","ᶒ":"e","ɇ":"e","ẽ":"e","ḛ":"e","ꝫ":"et","ḟ":"f","ƒ":"f","ᵮ":"f","ᶂ":"f","ǵ":"g","ğ":"g","ǧ":"g","ģ":"g","ĝ":"g","ġ":"g","ɠ":"g","ḡ":"g","ᶃ":"g","ǥ":"g","ḫ":"h","ȟ":"h","ḩ":"h","ĥ":"h","ⱨ":"h","ḧ":"h","ḣ":"h","ḥ":"h","ɦ":"h","ẖ":"h","ħ":"h","ƕ":"hv","í":"i","ĭ":"i","ǐ":"i","î":"i","ï":"i","ḯ":"i","ị":"i","ȉ":"i","ì":"i","ỉ":"i","ȋ":"i","ī":"i","į":"i","ᶖ":"i","ɨ":"i","ĩ":"i","ḭ":"i","ꝺ":"d","ꝼ":"f","ᵹ":"g","ꞃ":"r","ꞅ":"s","ꞇ":"t","ꝭ":"is","ǰ":"j","ĵ":"j","ʝ":"j","ɉ":"j","ḱ":"k","ǩ":"k","ķ":"k","ⱪ":"k","ꝃ":"k","ḳ":"k","ƙ":"k","ḵ":"k","ᶄ":"k","ꝁ":"k","ꝅ":"k","ĺ":"l","ƚ":"l","ɬ":"l","ľ":"l","ļ":"l","ḽ":"l","ȴ":"l","ḷ":"l","ḹ":"l","ⱡ":"l","ꝉ":"l","ḻ":"l","ŀ":"l","ɫ":"l","ᶅ":"l","ɭ":"l","ł":"l","ǉ":"lj","ſ":"s","ẜ":"s","ẛ":"s","ẝ":"s","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ᵯ":"m","ᶆ":"m","ń":"n","ň":"n","ņ":"n","ṋ":"n","ȵ":"n","ṅ":"n","ṇ":"n","ǹ":"n","ɲ":"n","ṉ":"n","ƞ":"n","ᵰ":"n","ᶇ":"n","ɳ":"n","ñ":"n","ǌ":"nj","ó":"o","ŏ":"o","ǒ":"o","ô":"o","ố":"o","ộ":"o","ồ":"o","ổ":"o","ỗ":"o","ö":"o","ȫ":"o","ȯ":"o","ȱ":"o","ọ":"o","ő":"o","ȍ":"o","ò":"o","ỏ":"o","ơ":"o","ớ":"o","ợ":"o","ờ":"o","ở":"o","ỡ":"o","ȏ":"o","ꝋ":"o","ꝍ":"o","ⱺ":"o","ō":"o","ṓ":"o","ṑ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","õ":"o","ṍ":"o","ṏ":"o","ȭ":"o","ƣ":"oi","ꝏ":"oo","ɛ":"e","ᶓ":"e","ɔ":"o","ᶗ":"o","ȣ":"ou","ṕ":"p","ṗ":"p","ꝓ":"p","ƥ":"p","ᵱ":"p","ᶈ":"p","ꝕ":"p","ᵽ":"p","ꝑ":"p","ꝙ":"q","ʠ":"q","ɋ":"q","ꝗ":"q","ŕ":"r","ř":"r","ŗ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ȑ":"r","ɾ":"r","ᵳ":"r","ȓ":"r","ṟ":"r","ɼ":"r","ᵲ":"r","ᶉ":"r","ɍ":"r","ɽ":"r","ↄ":"c","ꜿ":"c","ɘ":"e","ɿ":"r","ś":"s","ṥ":"s","š":"s","ṧ":"s","ş":"s","ŝ":"s","ș":"s","ṡ":"s","ṣ":"s","ṩ":"s","ʂ":"s","ᵴ":"s","ᶊ":"s","ȿ":"s","ɡ":"g","ß":"ss","ᴑ":"o","ᴓ":"o","ᴝ":"u","ť":"t","ţ":"t","ṱ":"t","ț":"t","ȶ":"t","ẗ":"t","ⱦ":"t","ṫ":"t","ṭ":"t","ƭ":"t","ṯ":"t","ᵵ":"t","ƫ":"t","ʈ":"t","ŧ":"t","ᵺ":"th","ɐ":"a","ᴂ":"ae","ǝ":"e","ᵷ":"g","ɥ":"h","ʮ":"h","ʯ":"h","ᴉ":"i","ʞ":"k","ꞁ":"l","ɯ":"m","ɰ":"m","ᴔ":"oe","ɹ":"r","ɻ":"r","ɺ":"r","ⱹ":"r","ʇ":"t","ʌ":"v","ʍ":"w","ʎ":"y","ꜩ":"tz","ú":"u","ŭ":"u","ǔ":"u","û":"u","ṷ":"u","ü":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǖ":"u","ṳ":"u","ụ":"u","ű":"u","ȕ":"u","ù":"u","ủ":"u","ư":"u","ứ":"u","ự":"u","ừ":"u","ử":"u","ữ":"u","ȗ":"u","ū":"u","ṻ":"u","ų":"u","ᶙ":"u","ů":"u","ũ":"u","ṹ":"u","ṵ":"u","ᵫ":"ue","ꝸ":"um","ⱴ":"v","ꝟ":"v","ṿ":"v","ʋ":"v","ᶌ":"v","ⱱ":"v","ṽ":"v","ꝡ":"vy","ẃ":"w","ŵ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẁ":"w","ⱳ":"w","ẘ":"w","ẍ":"x","ẋ":"x","ᶍ":"x","ý":"y","ŷ":"y","ÿ":"y","ẏ":"y","ỵ":"y","ỳ":"y","ƴ":"y","ỷ":"y","ỿ":"y","ȳ":"y","ẙ":"y","ɏ":"y","ỹ":"y","ź":"z","ž":"z","ẑ":"z","ʑ":"z","ⱬ":"z","ż":"z","ẓ":"z","ȥ":"z","ẕ":"z","ᵶ":"z","ᶎ":"z","ʐ":"z","ƶ":"z","ɀ":"z","ﬀ":"ff","ﬃ":"ffi","ﬄ":"ffl","ﬁ":"fi","ﬂ":"fl","ĳ":"ij","œ":"oe","ﬆ":"st","ₐ":"a","ₑ":"e","ᵢ":"i","ⱼ":"j","ₒ":"o","ᵣ":"r","ᵤ":"u","ᵥ":"v","ₓ":"x"};e.exports={latinise:function(e){return i(e,function(e){return r[e]||e}).join("")}}},1726:function(e,t,n){"use strict";
/*!
 * is-equal-shallow <https://github.com/jonschlinkert/is-equal-shallow>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var i=n(1727);e.exports=function(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var n,r=0,o=0;for(n in t)if(o++,!i(t[n])||!e.hasOwnProperty(n)||e[n]!==t[n])return!1;for(n in e)r++;return r===o}},1727:function(e,t,n){"use strict";
/*!
 * is-primitive <https://github.com/jonschlinkert/is-primitive>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */e.exports=function(e){return null==e||"function"!=typeof e&&"object"!=typeof e}},1728:function(e,t){e.exports=function(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}},1729:function(e,t,n){var i=n(1475),r=n(156),o=n(67),s=n(1728),a=n(20);e.exports=function(e,t,n){var c=a(e)?i:s,l=arguments.length<3;return c(e,o(t,4),n,l,r)}},1731:function(e,t){e.exports=["#003abc","#00cd7a","#11d360","#188fff","#1ac567","#400090","#6d00f6","#7300ff","#f0162f","#f80e5d","#ff333a","#ff8b12","#ffb700","#ffc700"]},1732:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r;function o(){return r=p(n(1))}var s;function a(){return s=n(1)}var c;var l;var u;function h(){return u=p(n(22))}var d;function f(){return d=p(n(1726))}function p(e){return e&&e.__esModule?e:{default:e}}n(98);var _,g,m=Object.assign,v=n(1731),y=/(profile_|39361574426_98028a_)/;"undefined"!=typeof window&&(_=window,g=_.devicePixelRatio||1);var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(s||a()).Component);function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={imageLoaded:!1,url:n.getImageUrl(e,e.retina?2:1)},n.handleImageOnload=n.handleImageOnload.bind(n),n}return i(t,[{key:"shouldComponentUpdate",value:function(e,t){return!(0,(d||f()).default)(this.props,e)||!(0,(d||f()).default)(this.state,t)}},{key:"componentDidMount",value:function(){var e=this;setImmediate(function(){e.setState({url:e.getImageUrl(e.props,g)})})}},{key:"getImageUrl",value:function(e,t){var i=null;return e.src&&(i=y.test(e.src)?null:e.src),i&&0===i.indexOf("https://s.yimg.com/wv/images/")&&(i=i.replace("_48.","_96.")),i=i||(e.enableAlphatar?(0,(l||(l=n(1718))).getAlphatar)(e.name,e.size*t):null)}},{key:"handleImageOnload",value:function(){this.setState({imageLoaded:!0})}},{key:"render",value:function(){var e=this.props,t=e.name,i=e.size,s=e.style,a=e.title;if(!t)return null;return(r||o()).default.createElement("div",{className:(0,(u||h()).default)("avatar D(ib)",e.className),onClick:e.onClick},(r||o()).default.createElement("div",{className:"Pos(r)"},(r||o()).default.createElement("div",{className:(0,(u||h()).default)("avatar-text Ta(c) Bdrs(48%)",{"Op(0) Trsdu(.3s) V(h)":this.state.imageLoaded}),title:a||t,style:m({},s,{backgroundColor:e.backgroundColor||v[function(e){if(!e)return 0;for(var t=0,n=0,i=e.length;n<i;n++)t+=e.charCodeAt(n)*(n+1);return t}(t)%v.length],color:e.color,fontSize:i/2+4,lineHeight:i+"px",width:i,height:i})},t[0]),this.state.url?(r||o()).default.createElement((c||(c=n(310))).Img,{className:"avatar-img Bdrs(48%) Pos(a) StretchedBox Bgc(#400090.03)",url:this.state.url,forceLoad:e.forceLoad,width:i,height:i,alt:t,title:a||t,style:s,onLoadCallback:this.handleImageOnload}):null))}}]),t}();E.displayName="Avatar",E.defaultProps={color:"#fff",enableAlphatar:!0,retina:!0,forceLoad:!1,size:100},t.default=E,e.exports=t.default},1908:function(e,t,n){(function(t,i){r=function(){var e,r,o;return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var c="function"==typeof _dereq_&&_dereq_;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return r(n||e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof _dereq_&&_dereq_,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),i=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),i}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,n,i){"use strict";var r;try{throw new Error}catch(e){r=e}var o=e("./schedule"),s=e("./queue"),a=e("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}c.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){a.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},c.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}};function l(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function u(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function h(e){this._normalQueue._pushOne(e),this._queueTick()}a.hasDevTools?(c.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},c.prototype.invoke=function(e,t,n){this._trampolineEnabled?u.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},c.prototype.settlePromises=function(e){this._trampolineEnabled?h.call(this,e):this._schedule(function(){e._settlePromises()})}):(c.prototype.invokeLater=l,c.prototype.invoke=u,c.prototype.settlePromises=h),c.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),i=e.shift();t.call(n,i)}else t._settlePromises()}},c.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=r},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){var r=!1,o=function(e,t){this._reject(t)},s=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){r||(r=!0,e.prototype._propagateFrom=i.propagateFromFunction(),e.prototype._boundValue=i.boundValueFunction());var l=n(o),u=new e(t);u._propagateFrom(this,1);var h=this._target();if(u._setBoundTo(l),l instanceof e){var d={promiseRejectionQueued:!1,promise:u,target:h,bindingPromise:l};h._then(t,s,void 0,u,d),l._then(a,c,void 0,u,d),u._setOnCancel(l)}else u._resolveCallback(h);return u},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var i;"undefined"!=typeof Promise&&(i=Promise);var r=e("./promise")();r.noConflict=function(){try{Promise===r&&(Promise=i)}catch(e){}return r},t.exports=r},{"./promise":22}],5:[function(e,t,n){"use strict";var i=Object.create;if(i){var r=i(null),o=i(null);r[" size"]=o[" size"]=0}t.exports=function(t){var n,i=e("./util"),r=i.canEvaluate;i.isIdentifier;function o(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var o="Object "+i.classString(e)+" has no method '"+i.toString(n)+"'";throw new t.TypeError(o)}return r}function s(e){return o(e,this.pop()).apply(e,this)}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(s,void 0,void 0,t,void 0)};function a(e){return e[this]}function c(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.get=function(e){var t;if("number"==typeof e)t=c;else if(r){var i=n(e);t=null!==i?i:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var o=e("./util"),s=o.tryCatch,a=o.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!r.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var i=s(e).call(this._boundValue());i===a&&(this._attachExtraTrace(i.e),c.throwLater(i.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),i=e("./es5").keys,r=n.tryCatch,o=n.errorObj;return function(e,s,a){return function(c){var l=a._boundValue();e:for(var u=0;u<e.length;++u){var h=e[u];if(h===Error||null!=h&&h.prototype instanceof Error){if(c instanceof h)return r(s).call(l,c)}else if("function"==typeof h){var d=r(h).call(l,c);if(d===o)return d;if(d)return r(s).call(l,c)}else if(n.isObject(c)){for(var f=i(h),p=0;p<f.length;++p){var _=f[p];if(h[_]!=c[_])continue e}return r(s).call(l,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=!1,n=[];e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){};function i(){this._trace=new i.CapturedTrace(r())}i.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},i.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null};function r(){var e=n.length-1;if(e>=0)return n[e]}return i.CapturedTrace=null,i.create=function(){if(t)return new i},i.deactivateLongStackTraces=function(){},i.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,s=e._peekContext,a=e.prototype._peekContext,c=e.prototype._promiseCreated;i.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=s,e.prototype._peekContext=a,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=i.prototype._pushContext,e.prototype._popContext=i.prototype._popContext,e._peekContext=e.prototype._peekContext=r,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},i}},{}],9:[function(e,n,i){"use strict";n.exports=function(n,i){var r,o,s,a=n._getDomain,c=n._async,l=e("./errors").Warning,u=e("./util"),h=u.canAttachTrace,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,f=/\((?:timers\.js):\d+:\d+\)/,p=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,_=null,g=null,m=!1,v=!(0==u.env("BLUEBIRD_DEBUG")),y=!(0==u.env("BLUEBIRD_WARNINGS")||!v&&!u.env("BLUEBIRD_WARNINGS")),E=!(0==u.env("BLUEBIRD_LONG_STACK_TRACES")||!v&&!u.env("BLUEBIRD_LONG_STACK_TRACES")),b=0!=u.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(y||!!u.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){V("rejectionHandled",r,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),V("unhandledRejection",o,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return L(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=a();o="function"==typeof e?null===t?e:u.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=a();r="function"==typeof e?null===t?e:u.domainBind(t,e):void 0};var S=function(){};n.longStackTraces=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Q.longStackTraces&&z()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;Q.longStackTraces=!0,S=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,i.deactivateLongStackTraces(),c.enableTrampoline(),Q.longStackTraces=!1},n.prototype._captureStackTrace=R,n.prototype._attachExtraTrace=N,i.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Q.longStackTraces&&z()};var C=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return u.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!u.global.dispatchEvent(n)}}if("function"==typeof Event){e=new Event("CustomEvent");return u.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!u.global.dispatchEvent(n)}}return(e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),u.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!u.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),k=u.isNode?function(){return t.emit.apply(t,arguments)}:u.global?function(e){var t="on"+e.toLowerCase(),n=u.global[t];return!!n&&(n.apply(u.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function w(e,t){return{promise:t}}var I={promiseCreated:w,promiseFulfilled:w,promiseRejected:w,promiseResolved:w,promiseCancelled:w,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:w},x=function(e){var t=!1;try{t=k.apply(null,arguments)}catch(e){c.throwLater(e),t=!0}var n=!1;try{n=C(e,I[e].apply(null,arguments))}catch(e){c.throwLater(e),n=!0}return n||t};n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&S()),"warnings"in e){var t=e.warnings;Q.warnings=!!t,b=Q.warnings,u.isObject(t)&&"wForgottenReturn"in t&&(b=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Q.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=F,n.prototype._propagateFrom=U,n.prototype._onCancel=P,n.prototype._setOnCancel=A,n.prototype._attachCancellationCallback=O,n.prototype._execute=j,M=U,Q.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Q.monitoring?(Q.monitoring=!0,n.prototype._fireEvent=x):!e.monitoring&&Q.monitoring&&(Q.monitoring=!1,n.prototype._fireEvent=T)),n};function T(){return!1}n.prototype._fireEvent=T,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};function j(e,t,n){var i=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+u.toString(e));i._attachCancellationCallback(e)})}catch(e){return e}}function O(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?u.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function P(){return this._onCancelField}function A(e){this._onCancelField=e}function F(){this._cancellationParent=void 0,this._onCancelField=void 0}function U(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}var M=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function D(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function R(){this._trace=new Y(this._peekContext())}function N(e,t){if(h(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var i=H(e);u.notEnumerableProp(e,"stack",i.message+"\n"+i.stack.join("\n")),u.notEnumerableProp(e,"__stackCleaned__",!0)}}}function L(e,t,i){if(Q.warnings){var r,o=new l(e);if(t)i._attachExtraTrace(o);else if(Q.longStackTraces&&(r=n._peekContext()))r.attachExtraTrace(o);else{var s=H(o);o.stack=s.message+"\n"+s.stack.join("\n")}x("warning",o)||W(o,"",!0)}}function B(e){for(var t=[],n=0;n<e.length;++n){var i=e[n],r="    (No stack trace)"===i||_.test(i),o=r&&K(i);r&&!o&&(m&&" "!==i.charAt(0)&&(i="    "+i),t.push(i))}return t}function H(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var i=t[n];if("    (No stack trace)"===i||_.test(i))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:B(t)}}function W(e,t,n){if("undefined"!=typeof console){var i;if(u.isObject(e)){var r=e.stack;i=t+g(r,e)}else i=t+String(e);"function"==typeof s?s(i,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(i)}}function V(e,t,n,i){var r=!1;try{"function"==typeof t&&(r=!0,"rejectionHandled"===e?t(i):t(n,i))}catch(e){c.throwLater(e)}"unhandledRejection"===e?x(e,n,i)||r||W(n,"Unhandled rejection "):x(e,i)}function G(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():u.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){if(e.length<41)return e;return e.substr(0,38)+"..."}(t)+">, no stack trace)"}function z(){return"function"==typeof X}var K=function(){return!1},J=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function q(e){var t=e.match(J);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function Y(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);X(this,Y),t>32&&this.uncycle()}u.inherits(Y,Error),i.CapturedTrace=Y,Y.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},i=0,r=this;void 0!==r;++i)t.push(r),r=r._parent;for(i=(e=this._length=i)-1;i>=0;--i){var o=t[i].stack;void 0===n[o]&&(n[o]=i)}for(i=0;i<e;++i){var s=n[t[i].stack];if(void 0!==s&&s!==i){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[i]._parent=void 0,t[i]._length=1;var a=i>0?t[i-1]:this;s<e-1?(a._parent=t[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,l=i-2;l>=0;--l)t[l]._length=c,c++;return}}}},Y.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=H(e),n=t.message,i=[t.stack],r=this;void 0!==r;)i.push(B(r.stack.split("\n"))),r=r._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var i=e[n],r=t.length-1,o=t[r],s=-1,a=i.length-1;a>=0;--a)if(i[a]===o){s=a;break}for(a=s;a>=0;--a){var c=i[a];if(t[r]!==c)break;t.pop(),r--}t=i}}(i),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(i),u.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,i)),u.notEnumerableProp(e,"__stackCleaned__",!0)}};var X=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():G(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,_=e,g=t;var n=Error.captureStackTrace;return K=function(e){return d.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,g=t,m=!0,function(e){e.stack=(new Error).stack};var r;try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(g=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?G(t):t.toString()},null):(_=e,g=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(s=function(e){console.warn(e)},u.isNode&&t.stderr.isTTY?s=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:u.isNode||"string"!=typeof(new Error).stack||(s=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Q={warnings:y,longStackTraces:!1,cancellation:!1,monitoring:!1};return E&&n.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return M},boundValueFunction:function(){return D},checkForgottenReturns:function(e,t,n,i,r){if(void 0===e&&null!==t&&b){if(void 0!==r&&r._returnedNonUndefined())return;if(0==(65535&i._bitField))return;n&&(n+=" ");var o="",s="";if(t._trace){for(var a=t._trace.stack.split("\n"),c=B(a),l=c.length-1;l>=0;--l){var u=c[l];if(!f.test(u)){var h=u.match(p);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(c.length>0){var d=c[0];for(l=0;l<a.length;++l)if(a[l]===d){l>0&&(s="\n"+a[l-1]);break}}}var _="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+s;i._warn(_,!0,t)}},setBounds:function(e,t){if(z()){for(var n,i,r=e.stack.split("\n"),o=t.stack.split("\n"),s=-1,a=-1,c=0;c<r.length;++c)if(l=q(r[c])){n=l.fileName,s=l.line;break}for(c=0;c<o.length;++c){var l;if(l=q(o[c])){i=l.fileName,a=l.line;break}}s<0||a<0||!n||!i||n!==i||s>=a||(K=function(e){if(d.test(e))return!0;var t=q(e);return!!(t&&t.fileName===n&&s<=t.line&&t.line<=a)})}},warn:L,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),L(n)},CapturedTrace:Y,fireDomEvent:C,fireGlobalEvent:k}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1],i=function(){throw t};return this.caught(e,i)},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var i=arguments[1];i instanceof e&&i.suppressUnhandledRejections();var r=function(){return i};return this.caught(n,r)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce,i=e.all;function r(){return i(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(r,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,i){return n(e,i,t,0)._then(r,void 0,void 0,e,void 0)},e.mapSeries=function(e,i){return n(e,i,t,t)}}},{}],12:[function(e,t,n){"use strict";var i=e("./es5"),r=i.freeze,o=e("./util"),s=o.inherits,a=o.notEnumerableProp;function c(e,t){function n(i){if(!(this instanceof n))return new n(i);a(this,"message","string"==typeof i?i:t),a(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return s(n,Error),n}var l,u,h=c("Warning","warning"),d=c("CancellationError","cancellation error"),f=c("TimeoutError","timeout error"),p=c("AggregateError","aggregate error");try{l=TypeError,u=RangeError}catch(e){l=c("TypeError","type error"),u=c("RangeError","range error")}for(var _="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<_.length;++g)"function"==typeof Array.prototype[_[g]]&&(p.prototype[_[g]]=Array.prototype[_[g]]);i.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var m=0;p.prototype.toString=function(){var e=Array(4*m+1).join(" "),t="\n"+e+"AggregateError of:\n";m++,e=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var i=this[n]===this?"[Circular AggregateError]":this[n]+"",r=i.split("\n"),o=0;o<r.length;++o)r[o]=e+r[o];t+=(i=r.join("\n"))+"\n"}return m--,t};function v(e){if(!(this instanceof v))return new v(e);a(this,"name","OperationalError"),a(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(a(this,"message",e.message),a(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}s(v,Error);var y=Error.__BluebirdErrorTypes__;y||(y=r({CancellationError:d,TimeoutError:f,OperationalError:v,RejectionError:v,AggregateError:p}),i.defineProperty(Error,"__BluebirdErrorTypes__",{value:y,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:l,RangeError:u,CancellationError:y.CancellationError,OperationalError:y.OperationalError,TimeoutError:y.TimeoutError,AggregateError:y.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,n){var i=function(){"use strict";return void 0===this}();if(i)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:i,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},c=function(e,t){return{value:e[t]}},l=function(e,t,n){return e[t]=n.value,e},u=function(e){return e},h=function(e){try{return Object(e).constructor.prototype}catch(e){return s}},d=function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}};t.exports={isArray:d,keys:a,names:a,defineProperty:l,getDescriptor:c,freeze:u,getPrototypeOf:h,isES5:i,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,i){return n(this,e,i,t)},e.filter=function(e,i,r){return n(e,i,r,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=e("./util"),o=t.CancellationError,s=r.errorObj,a=e("./catch_filter")(i);function c(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}c.prototype.isFinallyHandler=function(){return 0===this.type};function l(e){this.finallyHandler=e}l.prototype._resultCancelled=function(){u(this.finallyHandler)};function u(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function h(){return f.call(this,this.promise._target()._settledValue())}function d(e){if(!u(this,e))return s.e=e,s}function f(e){var r=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(r._boundValue()):a.call(r._boundValue(),e);if(c===i)return c;if(void 0!==c){r._setReturnedNonUndefined();var f=n(c,r);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var p=new o("late cancellation observer");return r._attachExtraTrace(p),s.e=p,s}f.isPending()&&f._attachCancellationCallback(new l(this))}return f._then(h,d,void 0,this,void 0)}}}return r.isRejected()?(u(this),s.e=e,s):(u(this),e)}return t.prototype._passThrough=function(e,t,n,i){return"function"!=typeof e?this.then():this._then(n,i,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,f,f)},t.prototype.tap=function(e){return this._passThrough(e,1,f)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,f);var i,o=new Array(n-1),s=0;for(i=0;i<n-1;++i){var c=arguments[i];if(!r.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+r.classString(c)));o[s++]=c}o.length=s;var l=arguments[i];return this._passThrough(a(o,l,this),1,void 0,f)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o,s){var a=e("./errors").TypeError,c=e("./util"),l=c.errorObj,u=c.tryCatch,h=[];function d(e,n,r,o){if(s.cancellation()){var a=new t(i),c=this._finallyPromise=new t(i);this._promise=a.lastly(function(){return c}),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(i))._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof r?[r].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,s.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=u(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),e=u(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=u(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=u(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var n=this._promise;if(e===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var i=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(i);var o=r(i,this._promise);if(o instanceof t||null!==(o=function(e,n,i){for(var o=0;o<n.length;++o){i._pushContext();var s=u(n[o])(e);if(i._popContext(),s===l){i._pushContext();var a=t.reject(l.e);return i._popContext(),a}var c=r(s,i);if(c instanceof t)return c}return null}(o,this._yieldHandlers,this._promise))){var s=(o=o._target())._bitField;0==(50397184&s)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&s)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&s)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(i))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,i=d,r=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new i(void 0,void 0,n,r),s=o.promise();return o._generator=t,o._promiseFulfilled(void 0),s}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+c.classString(e));h.push(e)},t.spawn=function(e){if(s.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var i=new d(e,this),r=i.promise();return i._run(t.spawn),r}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o,s){var a=e("./util");a.canEvaluate,a.tryCatch,a.errorObj;t.join=function(){var e,t=arguments.length-1;if(t>0&&"function"==typeof arguments[t]){e=arguments[t]}var i=[].slice.call(arguments);e&&i.pop();var r=new n(i).promise();return void 0!==e?r.spread(e):r}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o,s){var a=t._getDomain,c=e("./util"),l=c.tryCatch,u=c.errorObj,h=t._async;function d(e,t,n,i){this.constructor$(e),this._promise._captureStackTrace();var r=a();this._callback=null===r?t:c.domainBind(r,t),this._preservedValues=i===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],h.invoke(this._asyncInit,this,void 0)}c.inherits(d,n),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(e,n){var i=this._values,o=this.length(),a=this._preservedValues,c=this._limit;if(n<0){if(i[n=-1*n-1]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return i[n]=e,this._queue.push(n),!1;null!==a&&(a[n]=e);var h=this._promise,d=this._callback,f=h._boundValue();h._pushContext();var p=l(d).call(f,e,n,o),_=h._popContext();if(s.checkForgottenReturns(p,_,null!==a?"Promise.filter":"Promise.map",h),p===u)return this._reject(p.e),!0;var g=r(p,this._promise);if(g instanceof t){var m=(g=g._target())._bitField;if(0==(50397184&m))return c>=1&&this._inFlight++,i[n]=g,g._proxy(this,-1*(n+1)),!1;if(0==(33554432&m))return 0!=(16777216&m)?(this._reject(g._reason()),!0):(this._cancel(),!0);p=g._value()}i[n]=p}return++this._totalResolved>=o&&(null!==a?this._filter(i,a):this._resolve(i),!0)},d.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var i=e.pop();this._promiseFulfilled(n[i],i)}},d.prototype._filter=function(e,t){for(var n=t.length,i=new Array(n),r=0,o=0;o<n;++o)e[o]&&(i[r++]=t[o]);i.length=r,this._resolve(i)},d.prototype.preservedValues=function(){return this._preservedValues};function f(e,n,r,o){if("function"!=typeof n)return i("expecting a function but got "+c.classString(n));var s=0;if(void 0!==r){if("object"!=typeof r||null===r)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(r)));if("number"!=typeof r.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(r.concurrency)));s=r.concurrency}return new d(e,n,s="number"==typeof s&&isFinite(s)&&s>=1?s:0,o).promise()}t.prototype.map=function(e,t){return f(this,e,t,null)},t.map=function(e,t,n,i){return f(e,t,n,i)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o){var s=e("./util"),a=s.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+s.classString(e));return function(){var i=new t(n);i._captureStackTrace(),i._pushContext();var r=a(e).apply(this,arguments),s=i._popContext();return o.checkForgottenReturns(r,s,"Promise.method",i),i._resolveFromSyncValue(r),i}},t.attempt=t.try=function(e){if("function"!=typeof e)return r("expecting a function but got "+s.classString(e));var i=new t(n);i._captureStackTrace(),i._pushContext();var c;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],u=arguments[2];c=s.isArray(l)?a(e).apply(u,l):a(e).call(u,l)}else c=a(e)();var h=i._popContext();return o.checkForgottenReturns(c,h,"Promise.try",i),i._resolveFromSyncValue(c),i},t.prototype._resolveFromSyncValue=function(e){e===s.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var i=e("./util"),r=i.maybeWrapAsError,o=e("./errors").OperationalError,s=e("./es5");var a=/^(?:name|message|stack|cause)$/;function c(e){var t;if((l=e)instanceof Error&&s.getPrototypeOf(l)===Error.prototype){(t=new o(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),r=0;r<n.length;++r){var c=n[r];a.test(c)||(t[c]=e[c])}return t}var l;return i.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(n,i){if(null!==e){if(n){var o=c(r(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var s=[].slice.call(arguments,1);e._fulfill(s)}else e._fulfill(i);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),i=t._async,r=n.tryCatch,o=n.errorObj;function s(e,t){if(!n.isArray(e))return a.call(this,e,t);var s=r(t).apply(this._boundValue(),[null].concat(e));s===o&&i.throwLater(s.e)}function a(e,t){var n=this._boundValue(),s=void 0===e?r(t).call(n,null):r(t).call(n,null,e);s===o&&i.throwLater(s.e)}function c(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var s=r(t).call(this._boundValue(),e);s===o&&i.throwLater(s.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=a;void 0!==t&&Object(t).spread&&(n=s),this._then(n,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,i){"use strict";n.exports=function(){var i=function(){return new p("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},r=function(){return new j.PromiseInspection(this._target())},o=function(e){return j.reject(new p(e))};function s(){}var a,c={},l=e("./util");a=l.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},l.notEnumerableProp(j,"_getDomain",a);var u=e("./es5"),h=e("./async"),d=new h;u.defineProperty(j,"_async",{value:d});var f=e("./errors"),p=j.TypeError=f.TypeError;j.RangeError=f.RangeError;var _=j.CancellationError=f.CancellationError;j.TimeoutError=f.TimeoutError,j.OperationalError=f.OperationalError,j.RejectionError=f.OperationalError,j.AggregateError=f.AggregateError;var g=function(){},m={},v={},y=e("./thenables")(j,g),E=e("./promise_array")(j,g,y,o,s),b=e("./context")(j),S=b.create,C=e("./debuggability")(j,b),k=(C.CapturedTrace,e("./finally")(j,y,v)),w=e("./catch_filter")(v),I=e("./nodeback"),x=l.errorObj,T=l.tryCatch;function j(e){e!==g&&function(e,t){if(null==e||e.constructor!==j)throw new p("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new p("expecting a function but got "+l.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}j.prototype.toString=function(){return"[object Promise]"},j.prototype.caught=j.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,i=new Array(t-1),r=0;for(n=0;n<t-1;++n){var s=arguments[n];if(!l.isObject(s))return o("Catch statement predicate: expecting an object but got "+l.classString(s));i[r++]=s}return i.length=r,e=arguments[n],this.then(void 0,w(i,e,this))}return this.then(void 0,e)},j.prototype.reflect=function(){return this._then(r,r,void 0,this,void 0)},j.prototype.then=function(e,t){if(C.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+l.classString(e);arguments.length>1&&(n+=", "+l.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},j.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},j.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+l.classString(e)):this.all()._then(e,void 0,void 0,m,void 0)},j.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},j.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new E(this).promise()},j.prototype.error=function(e){return this.caught(l.originatesFromRejection,e)},j.getNewLibraryCopy=n.exports,j.is=function(e){return e instanceof j},j.fromNode=j.fromCallback=function(e){var t=new j(g);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,i=T(e)(I(t,n));return i===x&&t._rejectCallback(i.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},j.all=function(e){return new E(e).promise()},j.cast=function(e){var t=y(e);return t instanceof j||((t=new j(g))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},j.resolve=j.fulfilled=j.cast,j.reject=j.rejected=function(e){var t=new j(g);return t._captureStackTrace(),t._rejectCallback(e,!0),t},j.setScheduler=function(e){if("function"!=typeof e)throw new p("expecting a function but got "+l.classString(e));return d.setScheduler(e)},j.prototype._then=function(e,t,n,i,r){var o=void 0!==r,s=o?r:new j(g),c=this._target(),u=c._bitField;o||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===i&&0!=(2097152&this._bitField)&&(i=0!=(50397184&u)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var h=a();if(0!=(50397184&u)){var f,p,m=c._settlePromiseCtx;0!=(33554432&u)?(p=c._rejectionHandler0,f=e):0!=(16777216&u)?(p=c._fulfillmentHandler0,f=t,c._unsetRejectionIsUnhandled()):(m=c._settlePromiseLateCancellationObserver,p=new _("late cancellation observer"),c._attachExtraTrace(p),f=t),d.invoke(m,c,{handler:null===h?f:"function"==typeof f&&l.domainBind(h,f),promise:s,receiver:i,value:p})}else c._addCallbacks(e,t,s,i,h);return s},j.prototype._length=function(){return 65535&this._bitField},j.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},j.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},j.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},j.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},j.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},j.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},j.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},j.prototype._isFinal=function(){return(4194304&this._bitField)>0},j.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},j.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},j.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},j.prototype._setAsyncGuaranteed=function(){d.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},j.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==c)return void 0===t&&this._isBound()?this._boundValue():t},j.prototype._promiseAt=function(e){return this[4*e-4+2]},j.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},j.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},j.prototype._boundValue=function(){},j.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,i=e._promise0,r=e._receiverAt(0);void 0===r&&(r=c),this._addCallbacks(t,n,i,r,null)},j.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),i=e._rejectionHandlerAt(t),r=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=c),this._addCallbacks(n,i,r,o,null)},j.prototype._addCallbacks=function(e,t,n,i,r){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=i,"function"==typeof e&&(this._fulfillmentHandler0=null===r?e:l.domainBind(r,e)),"function"==typeof t&&(this._rejectionHandler0=null===r?t:l.domainBind(r,t));else{var s=4*o-4;this[s+2]=n,this[s+3]=i,"function"==typeof e&&(this[s+0]=null===r?e:l.domainBind(r,e)),"function"==typeof t&&(this[s+1]=null===r?t:l.domainBind(r,t))}return this._setLength(o+1),o},j.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},j.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(i(),!1);var n=y(e,this);if(!(n instanceof j))return this._fulfill(e);t&&this._propagateFrom(n,2);var r=n._target();if(r!==this){var o=r._bitField;if(0==(50397184&o)){var s=this._length();s>0&&r._migrateCallback0(this);for(var a=1;a<s;++a)r._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&o))this._fulfill(r._value());else if(0!=(16777216&o))this._reject(r._reason());else{var c=new _("late cancellation observer");r._attachExtraTrace(c),this._reject(c)}}else this._reject(i())}},j.prototype._rejectCallback=function(e,t,n){var i=l.ensureErrorObject(e),r=i===e;if(!r&&!n&&C.warnings()){var o="a promise was rejected with a non-error: "+l.classString(e);this._warn(o,!0)}this._attachExtraTrace(i,!!t&&r),this._reject(e)},j.prototype._resolveFromExecutor=function(e){if(e!==g){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,i=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==i&&t._rejectCallback(i,!0)}},j.prototype._settlePromiseFromHandler=function(e,t,n,i){var r=i._bitField;if(0==(65536&r)){i._pushContext();var o;t===m?n&&"number"==typeof n.length?o=T(e).apply(this._boundValue(),n):(o=x).e=new p("cannot .spread() a non-array: "+l.classString(n)):o=T(e).call(t,n);var s=i._popContext();0==(65536&(r=i._bitField))&&(o===v?i._reject(n):o===x?i._rejectCallback(o.e,!1):(C.checkForgottenReturns(o,s,"",i,this),i._resolveCallback(o)))}},j.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},j.prototype._followee=function(){return this._rejectionHandler0},j.prototype._setFollowee=function(e){this._rejectionHandler0=e},j.prototype._settlePromise=function(e,t,n,i){var o=e instanceof j,a=this._bitField,c=0!=(134217728&a);0!=(65536&a)?(o&&e._invokeInternalOnCancel(),n instanceof k&&n.isFinallyHandler()?(n.cancelPromise=e,T(t).call(n,i)===x&&e._reject(x.e)):t===r?e._fulfill(r.call(n)):n instanceof s?n._promiseCancelled(e):o||e instanceof E?e._cancel():n.cancel()):"function"==typeof t?o?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,i,e)):t.call(n,i,e):n instanceof s?n._isResolved()||(0!=(33554432&a)?n._promiseFulfilled(i,e):n._promiseRejected(i,e)):o&&(c&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(i):e._reject(i))},j.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,i=e.receiver,r=e.value;"function"==typeof t?n instanceof j?this._settlePromiseFromHandler(t,i,r,n):t.call(i,r,n):n instanceof j&&n._reject(r)},j.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},j.prototype._settlePromise0=function(e,t,n){var i=this._promise0,r=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,e,r,t)},j.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},j.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=i();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():d.settlePromises(this))}},j.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return d.fatalError(e,l.isNode);(65535&t)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},j.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var i=this._fulfillmentHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,t)}},j.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var i=this._rejectionHandlerAt(n),r=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(r,i,o,t)}},j.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var i=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,i,e),this._fulfillPromises(t,i)}this._setLength(0)}this._clearCancellationData()},j.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0};function O(e){this.promise._resolveCallback(e)}function P(e){this.promise._rejectCallback(e,!1)}j.defer=j.pending=function(){C.deprecated("Promise.defer","new Promise");return{promise:new j(g),resolve:O,reject:P}},l.notEnumerableProp(j,"_makeSelfResolutionError",i),e("./method")(j,g,y,o,C),e("./bind")(j,g,y,C),e("./cancel")(j,E,o,C),e("./direct_resolve")(j),e("./synchronous_inspection")(j),e("./join")(j,E,y,g,d,a),j.Promise=j,j.version="3.5.1",e("./map.js")(j,E,o,y,g,C),e("./call_get.js")(j),e("./using.js")(j,o,y,S,g,C),e("./timers.js")(j,g,C),e("./generators.js")(j,o,g,y,s,C),e("./nodeify.js")(j),e("./promisify.js")(j,g),e("./props.js")(j,E,y,o),e("./race.js")(j,g,y,o),e("./reduce.js")(j,E,o,y,g,C),e("./settle.js")(j,E,C),e("./some.js")(j,E,o),e("./filter.js")(j,g),e("./each.js")(j,g),e("./any.js")(j),l.toFastProperties(j),l.toFastProperties(j.prototype);function A(e){var t=new j(g);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return A({a:1}),A({b:2}),A({c:3}),A(1),A(function(){}),A(void 0),A(!1),A(new j(g)),C.setBounds(h.firstLineError,l.lastLineError),j}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o){var s=e("./util");s.isArray;function a(e){var i=this._promise=new t(n);e instanceof t&&i._propagateFrom(e,3),i._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return s.inherits(a,o),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(n,o){var a=i(this._values,this._promise);if(a instanceof t){var c=(a=a._target())._bitField;if(this._values=a,0==(50397184&c))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=s.asArray(a)))0!==a.length?this._iterate(a):-5===o?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var l=r("expecting an array or an iterable object but got "+s.classString(a)).reason();this._promise._rejectCallback(l,!1)}},a.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var r=this._promise,o=!1,s=null,a=0;a<n;++a){var c=i(e[a],r);s=c instanceof t?(c=c._target())._bitField:null,o?null!==s&&c.suppressUnhandledRejections():null!==s?0==(50397184&s)?(c._proxy(this,a),this._values[a]=c):o=0!=(33554432&s)?this._promiseFulfilled(c._value(),a):0!=(16777216&s)?this._promiseRejected(c._reason(),a):this._promiseCancelled(a):o=this._promiseFulfilled(c,a)}o||r._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){this._values[t]=e;return++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var i={},r=e("./util"),o=e("./nodeback"),s=r.withAppended,a=r.maybeWrapAsError,c=r.canEvaluate,l=e("./errors").TypeError,u={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return r.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!h.test(e)}function p(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function _(e,t,n){var i=r.getDataPropertyOrDefault(e,t+n,u);return!!i&&p(i)}function g(e,t,n,i){for(var o=r.inheritedDataKeys(e),s=[],a=0;a<o.length;++a){var c=o[a],u=e[c],h=i===d||d(c,u,e);"function"!=typeof u||p(u)||_(e,c,t)||!i(c,u,e,h)||s.push(c,u)}return function(e,t,n){for(var i=0;i<e.length;i+=2){var r=e[i];if(n.test(r))for(var o=r.replace(n,""),s=0;s<e.length;s+=2)if(e[s]===o)throw new l("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(s,t,n),s}var m,v=function(e){return e.replace(/([$])/,"\\$")};var y=c?m:function(e,c,l,u,h,d){var f=function(){return this}(),p=e;"string"==typeof p&&(e=u);function _(){var r=c;c===i&&(r=this);var l=new t(n);l._captureStackTrace();var u="string"==typeof p&&this!==f?this[p]:e,h=o(l,d);try{u.apply(r,s(arguments,h))}catch(e){l._rejectCallback(a(e),!0,!0)}return l._isFateSealed()||l._setAsyncGuaranteed(),l}return r.notEnumerableProp(_,"__isPromisified__",!0),_};function E(e,t,n,o,s){for(var a=new RegExp(v(t)+"$"),c=g(e,t,a,n),l=0,u=c.length;l<u;l+=2){var h=c[l],d=c[l+1],f=h+t;if(o===y)e[f]=y(h,i,h,d,t,s);else{var p=o(d,function(){return y(h,i,h,d,t,s)});r.notEnumerableProp(p,"__isPromisified__",!0),e[f]=p}}return r.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new l("expecting a function but got "+r.classString(e));if(p(e))return e;var n,o,s,a=void 0===(t=Object(t)).context?i:t.context,c=!!t.multiArgs,u=(n=e,o=a,s=c,y(n,o,void 0,n,null,s));return r.copyDescriptors(e,u,f),u},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new l("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,i=t.suffix;"string"!=typeof i&&(i="Async");var o=t.filter;"function"!=typeof o&&(o=d);var s=t.promisifier;if("function"!=typeof s&&(s=y),!r.isIdentifier(i))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=r.inheritedDataKeys(e),c=0;c<a.length;++c){var u=e[a[c]];"constructor"!==a[c]&&r.isClass(u)&&(E(u.prototype,i,o,s,n),E(u,i,o,s,n))}return E(e,i,o,s,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var o,s=e("./util"),a=s.isObject,c=e("./es5");"function"==typeof Map&&(o=Map);var l=function(){var e=0,t=0;function n(n,i){this[e]=n,this[e+t]=i,e++}return function(i){t=i.size,e=0;var r=new Array(2*i.size);return i.forEach(n,r),r}}();function u(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=l(e),n=!0;else{var i=c.keys(e),r=i.length;t=new Array(2*r);for(var s=0;s<r;++s){var a=i[s];t[s]=e[a],t[s+r]=a}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}s.inherits(u,n),u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,t){this._values[t]=e;if(++this._totalResolved>=this._length){var n;if(this._isMap)n=function(e){for(var t=new o,n=e.length/2|0,i=0;i<n;++i){var r=e[n+i],s=e[i];t.set(r,s)}return t}(this._values);else{n={};for(var i=this.length(),r=0,s=this.length();r<s;++r)n[this._values[r+i]]=this._values[r]}return this._resolve(n),!0}return!1},u.prototype.shouldCopyValues=function(){return!1},u.prototype.getActualLength=function(e){return e>>1};function h(e){var n,o=i(e);return a(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new u(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):r("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}t.prototype.props=function(){return h(this)},t.props=function(e){return h(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function i(e){this._capacity=e,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(e){return this._capacity<e},i.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);this[this._front+t&this._capacity-1]=e,this._length=t+1},i.prototype.push=function(e,t,n){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var r=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[r+0&o]=e,this[r+1&o]=t,this[r+2&o]=n,this._length=i},i.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;!function(e,t,n,i,r){for(var o=0;o<r;++o)n[o+i]=e[o+t],e[o+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=i},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,i,r){var o=e("./util"),s=function(e){return e.then(function(t){return a(t,e)})};function a(e,a){var c=i(e);if(c instanceof t)return s(c);if(null===(e=o.asArray(e)))return r("expecting an array or an iterable object but got "+o.classString(e));var l=new t(n);void 0!==a&&l._propagateFrom(a,3);for(var u=l._fulfill,h=l._reject,d=0,f=e.length;d<f;++d){var p=e[d];(void 0!==p||d in e)&&t.cast(p)._then(u,h,void 0,l,null)}return l}t.race=function(e){return a(e,void 0)},t.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o,s){var a=t._getDomain,c=e("./util"),l=c.tryCatch;function u(e,n,i,r){this.constructor$(e);var s=a();this._fn=null===s?n:c.domainBind(s,n),void 0!==i&&(i=t.resolve(i))._attachCancellationCallback(this),this._initialValue=i,this._currentCancellable=null,this._eachValues=r===o?Array(this._length):0===r?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}c.inherits(u,n),u.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},u.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},u.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},u.prototype._iterate=function(e){this._values=e;var n,i,r=e.length;if(void 0!==this._initialValue?(n=this._initialValue,i=0):(n=t.resolve(e[0]),i=1),this._currentCancellable=n,!n.isRejected())for(;i<r;++i){var o={accum:null,value:e[i],index:i,length:r,array:this};n=n._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(h,h,void 0,n,this)},t.prototype.reduce=function(e,t){return d(this,e,t,null)},t.reduce=function(e,t,n,i){return d(e,t,n,i)};function h(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function d(e,t,n,r){if("function"!=typeof t)return i("expecting a function but got "+c.classString(t));return new u(e,t,n,r).promise()}function f(e){this.accum=e,this.array._gotAccum(e);var n=r(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(e){var n=this.array,i=n._promise,r=l(n._fn);i._pushContext();var o;(o=void 0!==n._eachValues?r.call(i._boundValue(),e,this.index,this.length):r.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=o);var a=i._popContext();return s.checkForgottenReturns(o,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),o}}},{"./util":36}],29:[function(e,n,r){"use strict";var o,s=e("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},c=s.getNativePromise();if(s.isNode&&"undefined"==typeof MutationObserver){var l=i.setImmediate,u=t.nextTick;o=s.isRecentNode?function(e){l.call(i,e)}:function(e){u.call(t,e)}}else if("function"==typeof c&&"function"==typeof c.resolve){var h=c.resolve();o=function(e){h.then(e)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:a:function(){var e=document.createElement("div"),t={attributes:!0},n=!1,i=document.createElement("div");new MutationObserver(function(){e.classList.toggle("foo"),n=!1}).observe(i,t);return function(r){var o=new MutationObserver(function(){o.disconnect(),r()});o.observe(e,t),n||(n=!0,i.classList.toggle("foo"))}}();n.exports=o},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=t.PromiseInspection;function o(e){this.constructor$(e)}e("./util").inherits(o,n),o.prototype._promiseResolved=function(e,t){this._values[e]=t;return++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(e,t){var n=new r;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},o.prototype._promiseRejected=function(e,t){var n=new r;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return i.deprecated(".settle()",".reflect()"),new o(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=e("./util"),o=e("./errors").RangeError,s=e("./errors").AggregateError,a=r.isArray,c={};function l(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}r.inherits(l,n),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(e){this._howMany=e},l.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new s,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(e){this._values.push(e)},l.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function u(e,t){if((0|t)!==t||t<0)return i("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(e),r=n.promise();return n.setHowMany(t),n.init(),r}t.some=function(e,t){return u(e,t)},t.prototype.some=function(e){return u(this,e)},t._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},s=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return s.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return r.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),i.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var i=e("./util"),r=i.errorObj,o=i.isObject;var s={}.hasOwnProperty;return function(e,a){if(o(e)){if(e instanceof t)return e;var c=function(e){try{return e.then}catch(e){return r.e=e,r}}(e);if(c===r){a&&a._pushContext();var l=t.reject(c.e);return a&&a._popContext(),l}if("function"==typeof c)return function(e){try{return s.call(e,"_promise0")}catch(e){return!1}}(e)?(l=new t(n),e._then(l._fulfill,l._reject,void 0,l,null),l):function(e,o,s){var a=new t(n),c=a;s&&s._pushContext(),a._captureStackTrace(),s&&s._popContext();var l=!0,u=i.tryCatch(o).call(e,function(e){a&&(a._resolveCallback(e),a=null)},function(e){a&&(a._rejectCallback(e,l,!0),a=null)});return l=!1,a&&u===r&&(a._rejectCallback(u.e,!0,!0),a=null),c}(e,c,a)}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,i){var r=e("./util"),o=t.TimeoutError;function s(e){this.handle=e}s.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,r){var o,c;return void 0!==r?(o=t.resolve(r)._then(a,null,null,e,void 0),i.cancellation()&&r instanceof t&&o._setOnCancel(r)):(o=new t(n),c=setTimeout(function(){o._fulfill()},+e),i.cancellation()&&o._setOnCancel(new s(c)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};t.prototype.delay=function(e){return c(e,this)};function l(e){return clearTimeout(this.handle),e}function u(e){throw clearTimeout(this.handle),e}t.prototype.timeout=function(e,t){e=+e;var n,a,c=new s(setTimeout(function(){n.isPending()&&function(e,t,n){var i;i="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),r.markAsOriginatingFromRejection(i),e._attachExtraTrace(i),e._reject(i),null!=n&&n.cancel()}(n,t,a)},e));return i.cancellation()?(a=this.then(),(n=a._then(l,u,void 0,c,void 0))._setOnCancel(c)):n=this._then(l,u,void 0,c,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,i,r,o,s){var a=e("./util"),c=e("./errors").TypeError,l=e("./util").inherits,u=a.errorObj,h=a.tryCatch,d={};function f(e){setTimeout(function(){throw e},0)}function p(e,n){var r=0,s=e.length,a=new t(o);return function o(){if(r>=s)return a._fulfill();var c=function(e){var t=i(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[r++]);if(c instanceof t&&c._isDisposable()){try{c=i(c._getDisposer().tryDispose(n),e.promise)}catch(e){return f(e)}if(c instanceof t)return c._then(o,f,null,null,null)}o()}(),a}function _(e,t,n){this._data=e,this._promise=t,this._context=n}_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},_.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var i=t!==d?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,i},_.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose};function g(e,t,n){this.constructor$(e,t,n)}l(g,_),g.prototype.doDispose=function(e,t){return this.data().call(e,e,t)};function m(e){return _.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}v.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var i=this[n];i instanceof t&&i.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var r=arguments[e-1];if("function"!=typeof r)return n("expecting a function but got "+a.classString(r));var o,c=!0;2===e&&Array.isArray(arguments[0])?(e=(o=arguments[0]).length,c=!1):(o=arguments,e--);for(var l=new v(e),d=0;d<e;++d){var f=o[d];if(_.isDisposer(f)){var g=f;(f=f.promise())._setDisposable(g)}else{var y=i(f);y instanceof t&&(f=y._then(m,null,null,{resources:l,index:d},void 0))}l[d]=f}var E=new Array(l.length);for(d=0;d<E.length;++d)E[d]=t.resolve(l[d]).reflect();var b=t.all(E).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return u.e=n.error(),u;if(!n.isFulfilled())return void b.cancel();e[t]=n.value()}S._pushContext(),r=h(r);var i=c?r.apply(void 0,e):r(e),o=S._popContext();return s.checkForgottenReturns(i,o,"Promise.using",S),i}),S=b.lastly(function(){var e=new t.PromiseInspection(b);return p(l,e)});return l.promise=S,S._setOnCancel(l),S},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new g(e,this,r());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,r,o){"use strict";var s=e("./es5"),a="undefined"==typeof navigator,c={e:{}},l,u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==i?i:void 0!==this?this:null;function h(){try{var e=l;return l=null,e.apply(this,arguments)}catch(e){return c.e=e,c}}function d(e){return l=e,h}var f=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e,this.constructor$=t;for(var i in t.prototype)n.call(t.prototype,i)&&"$"!==i.charAt(i.length-1)&&(this[i+"$"]=t.prototype[i])}return i.prototype=t.prototype,e.prototype=new i,e.prototype};function p(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function _(e){return"function"==typeof e||"object"==typeof e&&null!==e}function g(e){return p(e)?new Error(T(e)):e}function m(e,t){var n,i=e.length,r=new Array(i+1);for(n=0;n<i;++n)r[n]=e[n];return r[n]=t,r}function v(e,t,n){if(!s.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var i=Object.getOwnPropertyDescriptor(e,t);return null!=i?null==i.get&&null==i.set?i.value:n:void 0}function y(e,t,n){if(p(e))return e;var i={value:n,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(e,t,i),e}function E(e){throw e}var b=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(s.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var i=[],r=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(e){return i}for(var a=0;a<o.length;++a){var c=o[a];if(!r[c]){r[c]=!0;var l=Object.getOwnPropertyDescriptor(e,c);null!=l&&null==l.get&&null==l.set&&i.push(c)}}e=s.getPrototypeOf(e)}return i}}var i={}.hasOwnProperty;return function(n){if(t(n))return[];var r=[];e:for(var o in n)if(i.call(n,o))r.push(o);else{for(var s=0;s<e.length;++s)if(i.call(e[s],o))continue e;r.push(o)}return r}}(),S=/this\s*\.\s*\S+\s*=/;function C(e){try{if("function"==typeof e){var t=s.names(e.prototype),n=s.isES5&&t.length>1,i=t.length>0&&!(1===t.length&&"constructor"===t[0]),r=S.test(e+"")&&s.names(e).length>0;if(n||i||r)return!0}return!1}catch(e){return!1}}function k(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e}var w=/^[a-z$_][a-z$_0-9]*$/i;function I(e){return w.test(e)}function x(e,t,n){for(var i=new Array(e),r=0;r<e;++r)i[r]=t+r+n;return i}function T(e){try{return e+""}catch(e){return"[no string representation]"}}function j(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function O(e){try{y(e,"isOperational",!0)}catch(e){}}function P(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function A(e){return j(e)&&s.propertyIsWritable(e,"stack")}var F="stack"in new Error?function(e){return A(e)?e:new Error(T(e))}:function(e){if(A(e))return e;try{throw new Error(T(e))}catch(e){return e}};function U(e){return{}.toString.call(e)}function M(e,t,n){for(var i=s.names(e),r=0;r<i.length;++r){var o=i[r];if(n(o))try{s.defineProperty(t,o,s.getDescriptor(e,o))}catch(e){}}}var D=function(e){return s.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],i=e[Symbol.iterator]();!(t=i.next()).done;)n.push(t.value);return n};D=function(e){return s.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?R(e):null}}var N=void 0!==t&&"[object process]"===U(t).toLowerCase(),L=void 0!==t&&!0;function B(e){return L?n.i({NODE_ENV:"production"})[e]:void 0}function H(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}}function W(e,t){return e.bind(t)}var V={isClass:C,isIdentifier:I,inheritedDataKeys:b,getDataPropertyOrDefault:v,thrower:E,isArray:s.isArray,asArray:D,notEnumerableProp:y,isPrimitive:p,isObject:_,isError:j,canEvaluate:a,errorObj:c,tryCatch:d,inherits:f,withAppended:m,maybeWrapAsError:g,toFastProperties:k,filledRange:x,toString:T,canAttachTrace:A,ensureErrorObject:F,originatesFromRejection:P,markAsOriginatingFromRejection:O,classString:U,copyDescriptors:M,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:N,hasEnvVariables:L,env:B,global:u,getNativePromise:H,domainBind:W};V.isRecentNode=V.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),V.isNode&&V.toFastProperties(t);try{throw new Error}catch(e){V.lastLineError=e}r.exports=V},{"./es5":13}]},{},[4])(4)},e.exports=r();var r;"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(t,n(47),n(31))},1909:function(e,t,n){"use strict";var i=n(125).createImmutableStore,r=n(46),o=i({statics:{storeName:"EndorsementStore",handlers:{FETCH_INFO_SUCCESS:"_fetchInfo",FETCH_UPDATED_INFO_SUCCESS:"_fetchUpdatedInfo",FETCH_UPDATED_CHEERS_SUCCESS:"_fetchUpdatedCheers",FETCH_UPDATED_FAVOR_SUCCESS:"_fetchUpdatedFavor",UPDATE_CHEERS:"_updateCheers",CLEANUP_SUCCESS:"_cleanup"}},_fetchInfo:function(e){e=e||{};var t={teams:this._isValidTeamsData(e.teams)?e.teams:null,favor:e.favor};this.mergeState(r.fromJS(t))},_fetchUpdatedInfo:function(e){if(e){var t={},n=!1;e.teams&&this._isValidTeamsData(e.teams)&&(t.teams=e.teams,n=!0),e.favor&&"number"==typeof e.favor&&(t.favor=e.favor,n=!0),n&&this.mergeState(r.fromJS(t))}},_fetchUpdatedCheers:function(e){if(e){var t=e.cheers,n=e.side;if("number"==typeof t&&("left"===n||"right"===n)){var i=this.getTeams();t<=i.getIn([n,"cheers"],0)||this.mergeState(r.fromJS({teams:i.setIn([n,"cheers"],t)}))}}},_updateCheers:function(e){if(e){var t=e.cheers,n=e.side,i=this.getTeams();"left"!==n&&"right"!==n||("number"!=typeof t&&(t=i.getIn([n,"cheers"],0)+1),this.mergeState(r.fromJS({teams:i.setIn([n,"cheers"],t)})))}},_fetchUpdatedFavor:function(e){var t=e;t<=(this.getFavor()||0)||this.mergeState(r.fromJS({favor:t}))},_cleanup:function(){this.setState({teams:null,favor:null})},_isValidTeamsData:function(e){var t=function(e,t){return e&&e[t]&&e[t].color&&e[t].iconUrl};return t(e,"left")&&t(e,"right")},getTeams:function(){return this._state.get("teams")},getFavor:function(){return this._state.get("favor")},isEndorsementEnabled:function(){return this.getTeams()||"number"==typeof this.getFavor()}});e.exports=o},1910:function(e,t){e.exports={host:"https://yabumediachat.firebaseio.com",messagePerBatch:30,cheerUpdateInterval:5}},2095:function(e,t){e.exports=function(e,t,n){var i=t.status||!1;e.dispatch("HANDLE_SHOW_STICKER_BOX",i)}},2096:function(e,t,n){"use strict";var i=n(125).createImmutableStore,r=n(46),o=i({statics:{storeName:"ChatBoxStore",handlers:{FETCH_MESSAGES_SUCCESS:"_fetchMessages",FETCH_OLDER_MESSAGES_SUCCESS:"_fetchOlderMessages",FETCH_ADDED_MESSAGES_SUCCESS:"_fetchAddedMessages",FETCH_UPDATED_MESSAGES_SUCCESS:"_fetchUpdatedMessages",FETCH_ADDED_PROMOTED_MESSAGES_SUCCESS:"_fetchAddedPromotedMessages",FETCH_LAST_PROMOTED_MESSAGE_SUCCESS:"_fetchLastPromotedMessage",TRUNCATE_MESSAGES:"_truncateMessages",CLEANUP_SUCCESS:"_cleanup"}},_fetchMessages:function(e){e=e||{};var t=r.fromJS(e.keys)||r.List(),n=r.fromJS(e.messageMap)||r.Map(),i=r.fromJS({type:"FIRST",hasLoadedMessages:!0,keys:t,messageMap:n});this.mergeState(i)},_fetchOlderMessages:function(e){e=e||{};var t=!1,n=this.getKeys(),i=this.getMessageMap(),o=r.fromJS(e.keys)||r.List(),s=r.fromJS(e.messageMap)||r.Map();o.get(o.count()-1,null)===n.get(0)&&(o=o.pop()),0===o.count()&&(t=!0);var a=r.fromJS({type:"OLDER",isAtOldestMessage:t,keys:o.concat(n),messageMap:s.merge(i)});this.mergeState(a)},_fetchAddedMessages:function(e){var t=(e=e||{}).key,n=e.message,i=this.getMessageMap();if(!i.get(t)){var o=r.fromJS({type:"ADDED",keys:this.getKeys().push(t),messageMap:i.set(t,r.fromJS(n)),lastMessage:r.fromJS(n)});this.mergeState(o)}},_fetchUpdatedMessages:function(e){var t=(e=e||{}).key,n=e.message,i=this.getMessageMap(),o=r.fromJS({type:"UPDATED",messageMap:i.set(t,r.fromJS(n)),lastMessage:r.fromJS(n)});this.mergeState(o)},_fetchAddedPromotedMessages:function(e){e=e||{};var t=r.fromJS({promotedMessage:e.promotedMessage});this.mergeState(t)},_fetchLastPromotedMessage:function(e){e=e||{};var t=r.fromJS({promotedMessage:e.promotedMessage});this.mergeState(t)},_cleanup:function(){var e={keys:r.List(),messageMap:r.Map(),promotedMessage:null,lastMessage:r.Map(),isAtOldestMessage:!1,hasLoadedMessages:!1};this.setState(e)},_truncateMessages:function(e){var t,n,i,o,s,a=this.getKeys();if(e&&!isNaN(e.start)&&!isNaN(e.end)){for(o=e.start,s=e.end,i=(a=a.toJS()).splice(o,s-o+1),n=this.getMessageMap(),t=0;t<i.length;t++)n=n.remove(i[t]);this.mergeState(r.fromJS({type:"TRUNCATED",keys:r.fromJS(a),messageMap:n}))}},getKeys:function(){return this._state.get("keys")||r.List()},getMessageMap:function(){return this._state.get("messageMap")||r.Map()},getPromotedMessage:function(){return this._state.get("promotedMessage")},getType:function(){return this._state.get("type")||null},getLastMessage:function(){return this._state.get("lastMessage")||r.Map()},isAtOldestMessage:function(){return this._state.get("isAtOldestMessage")||!1},hasLoadedMessages:function(){return this._state.get("hasLoadedMessages")||!1}});e.exports=o},2097:function(e,t,n){"use strict";var i=n(125).createImmutableStore,r=n(46),o=i({statics:{storeName:"StickerStore",handlers:{HANDLE_STICKER_PREVIEW_LAYOUT:"_handleStickerPreviewLayout",HANDLE_SHOW_STICKER_BOX:"_handleShowStickerBox",FETCH_STICKER_CATEGORY_SUCCESS:"_handleFetchingCategorySuccess",FFETCH_STICKERS_SUCCESS:"_handleFetcingStickersSuccess",UPDATE_STICKER_CATEGORY_ID:"_handleUpdatingCategoryId"}},initialize:function(){this._state=r.fromJS({showStickerBox:!1,showPreviewLayout:!1,hasFetchCategory:!1,currentCategoryId:null,categories:[],stickers:{}})},_handleStickerPreviewLayout:function(e){this.mergeState({showPreviewLayout:e.status,previewStickerUrl:e.previewStickerUrl,previewStickerTitle:e.previewStickerTitle,previewStickerPosition:e.previewStickerPosition})},_handleFetchingCategorySuccess:function(e){var t=e.map(function(e){return e.category});if(!(t.length<=0)){var n=e.reduce(function(e,t){var n=t.category.id;return e[n]=t.stickers||[],e[n]={hasFetchedAll:!1,data:t.stickers||[]},e},{});this.mergeState({hasFetchCategory:!0,currentCategoryId:t[0].id,categories:t,stickers:n})}},_handleShowStickerBox:function(e){"toggle"===e?this.mergeState({showStickerBox:!this.showStickerBox()}):this.mergeState({showStickerBox:e})},_handleUpdatingCategoryId:function(e){this.mergeState({currentCategoryId:e})},_handleFetcingStickersSuccess:function(e){if(e&&e.forEach){var t=this.get("stickers",r.Map());e.forEach(function(e){var n=e.category.id;t=(t=t.setIn([n,"data"],r.List(e.stickers))).setIn([n,"hasFetchedAll"],!0)}),this.mergeState({stickers:t})}},showPreviewLayout:function(){return this.get("showPreviewLayout",!1)},showStickerBox:function(){return this.get("showStickerBox",!1)},hasFetchCategory:function(){return this.get("hasFetchCategory",!1)},hasStickersFetched:function(e){return this._state.getIn(["stickers",e,"hasFetchedAll"],!1)},getPreviewStickerUrl:function(){return this.get("previewStickerUrl",null)},getPreviewStickerTitle:function(){return this.get("previewStickerTitle",null)},getPreviewStickerPosition:function(){return this.get("previewStickerPosition",null)},getCategories:function(){return this.get("categories",r.List())},getCurrentCategoryId:function(){return this.get("currentCategoryId")},getCurrentStickers:function(){return this.getStickers(this.getCurrentCategoryId())},getStickers:function(e){return this._state.getIn(["stickers",e,"data"],r.List())}});e.exports=o},2278:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){var r=(t=t||{}).uuid,o=t.guid;r&&o?e.service.read("GetEndorseTokenService",t,{},function(e,t){!e&&t?i.authWithToken(t).then(function(e){n&&n()}).catch(function(e){n&&n()}):n&&n()}):n&&n()}},2279:function(e,t,n){"use strict";var i=n(536);e.exports=function(e,t,n){t=t||{};var r=e.getStore(i);t.uuid=t.uuid||r&&r.getUUID(),t.uuid?e.service.read("LoadInfoService",t,{},function(t,i){t?e.dispatch("FETCH_INFO_FAILURE",t):i?e.dispatch("FETCH_INFO_SUCCESS",i):e.dispatch("FETCH_INFO_EMPTY",i),n&&n()}):n&&n()}},2280:function(e,t,n){"use strict";var i=n(2095);e.exports=function(e,t,n){t=t||{},e.service.create("PostMessageService",{},t,{},function(){e.executeAction(i,{status:!1}),n&&n()})}},2282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(){return i=c(n(1))}var s;var a;function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(i||o()).default.Component);function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,[{key:"render",value:function(){var e=this.props,t=e.badgeColor,r=e.badgeSrc,l=e.name,u=e.size,h=void 0===u?30:u,d=e.src,f=(0,(s||(s=c(n(22)))).default)("Pos(a) End(-8px) B(-1px) W(16px) H(16px)","Bdw(1px) Bds(s) Bdc(white) Bdrs(100%) Bgz(cv)"),p={backgroundColor:"#"+t,backgroundImage:"url('"+r+"')"};return(i||o()).default.createElement("div",{className:"Pos(r) D(ib)"},(i||o()).default.createElement((a||(a=c(n(1442)))).default,{name:l,size:h,src:d}),(i||o()).default.createElement("div",{className:f,style:p}))}}]),t}();t.default=l,e.exports=t.default},2283:function(e,t,n){"use strict";var i=n(125).createImmutableStore,r=n(46),o=i({statics:{storeName:"CheckInStore",handlers:{FETCH_CHECKIN_OPTIONS_SUCCESS:"_fetchCheckInOptions",FETCH_INFO_SUCCESS:"_fetchInfo",FETCH_UPDATED_CHECKIN_SUCCESS:"_fetchUpdatedCheckIn",FETCH_USER_TAG_SUCCESS:"_fetchUserTag",CLEANUP_SUCCESS:"_cleanup"}},initialize:function(){this._state=r.fromJS({checkIn:{},userTags:[]})},_fetchInfo:function(e){e=e||{},this.mergeState({checkIn:this.getCheckIn().merge(e.checkIn)})},_fetchCheckInOptions:function(e){e=e||{},this.mergeState({checkIn:this.getCheckIn().merge({options:e.options,title:e.title,type:e.type})})},_fetchUpdatedCheckIn:function(e){e=e||{},this.mergeState({checkIn:this.getCheckIn().merge({users:e.users})})},_fetchUserTag:function(e){e=e||{},this.mergeState({userTags:e.userTags})},_cleanup:function(){this.setState({checkIn:{},userTags:[]})},getCheckIn:function(){return this.get("checkIn",r.Map())},getUserTags:function(){return this.get("userTags",r.List())},isCheckInEnabled:function(){var e=this.getCheckIn();return!!r.Map.isMap(e)&&!!e.get("id")}});e.exports=o},2522:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.cleanupWithUUID(t.uuid,t.shouldGoOffline),t.shouldDispatchEvent&&e.dispatch("CLEANUP_SUCCESS",{}),n&&n()}},2523:function(e,t,n){"use strict";var i=n(2552),r=n(526),o=n(2279),s=n(1466),a=n(1359).getProfile;e.exports=function(e,t,n){var c=e.getStore(r).isLoaded(),l=t.componentProps&&t.componentProps.videoId,u={};u.loadInfo=i.apply(o,e,t),l&&(u.updateVideoInfo=i.apply(s,e,{videoId:l})),c||(u.loadProfile=i.apply(a,e,t)),i.parallel(u,n)}},2524:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getAddedMessagesWithUUID(t.uuid,t.timestamp,function(t){e.dispatch("FETCH_ADDED_MESSAGES_SUCCESS",t)},function(t){e.dispatch("FETCH_ADDED_MESSAGES_FAILURE",t)}),n&&n()}},2525:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getAddedPromotedMessagesWithUUID(t.uuid,function(t){e.dispatch("FETCH_ADDED_PROMOTED_MESSAGES_SUCCESS",t)},function(t){e.dispatch("FETCH_ADDED_PROMOTED_MESSAGES_FAILURE",t)}),n&&n()}},2526:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getOptionsWithCheckInId(t.checkInId).then(function(t){e.dispatch("FETCH_CHECKIN_OPTIONS_SUCCESS",t)}),i.getUpdatedCheckInUsersWithUUID(t.uuid,function(t,i){return t||!i?(e.dispatch("FETCH_UPDATED_CHECKIN_FAILURE",t),n&&n(t)):(e.dispatch("FETCH_UPDATED_CHECKIN_SUCCESS",i),n&&n())})}},2527:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getLastPromotedMessageWithUUID(t.uuid).then(function(t){e.dispatch("FETCH_LAST_PROMOTED_MESSAGE_SUCCESS",t),n&&n()}).catch(function(t){e.dispatch("FETCH_LAST_PROMOTED_MESSAGE_FAILURE",t),n&&n()})}},2528:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){var r=(t=t||{}).beforeTimestamp;i.getMessagesWithUUID(t.uuid,r).then(function(t){r?e.dispatch("FETCH_OLDER_MESSAGES_SUCCESS",t):e.dispatch("FETCH_MESSAGES_SUCCESS",t),n&&n()}).catch(function(t){e.dispatch("FETCH_MESSAGES_FAILURE",t),n&&n()})}},2529:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getUpdatedCheersWithUUID(t.uuid,t.side,function(t,n){n&&!t?e.dispatch("FETCH_UPDATED_CHEERS_SUCCESS",n):e.dispatch("FETCH_UPDATED_CHEERS_FAILURE",t)}),n&&n()}},2530:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getUpdatedFavorWithUUID(t.uuid,function(t,n){n&&!t?e.dispatch("FETCH_UPDATED_FAVOR_SUCCESS",n):e.dispatch("FETCH_UPDATED_FAVOR_FAILURE",t)})}},2531:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getUpdatedInfoWithUUID(t.uuid,function(t){e.dispatch("FETCH_UPDATED_INFO_SUCCESS",t)},function(t){e.dispatch("FETCH_UPDATED_INFO_FAILURE",t)}),n&&n()}},2532:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},i.getUpdatedMessagesWithUUID(t.uuid,t.timestamp,function(t){e.dispatch("FETCH_UPDATED_MESSAGES_SUCCESS",t)},function(t){e.dispatch("FETCH_UPDATED_MESSAGES_FAILURE",t)}),n&&n()}},2533:function(e,t,n){"use strict";e.exports=function(e,t,n){var i={guid:(t=t||{}).guid,qid:t.qid};e.service.read("UserTagService",i,function(t,i){return t||!i?n&&n(t):(e.dispatch("FETCH_USER_TAG_SUCCESS",{userTags:i}),n&&n())})}},2534:function(e,t,n){var i=n(5);e.exports=function(e,t,n){var r=t.preload||3;e.service.read("FetchStickerCategoryService",r,{},function(t,r){var o=i(r,["category_list","result"]);if(t||!o)return e.dispatch("FFETCH_STICKER_CATEGORY_FAILURE",t),void(n&&n());e.dispatch("FETCH_STICKER_CATEGORY_SUCCESS",o),n&&n()})}},2535:function(e,t,n){var i=n(5),r=n(2097);e.exports=function(e,t,n){var o=t.categoryId;if(!o)return n&&n();if(e.getStore(r).hasStickersFetched(o))return n&&n();e.service.read("FetchStickersByCategoryService",{categoryId:o},{},function(t,r){var o=i(r,["category_data","result"]);if(t||!o)return e.dispatch("FFETCH_STICKERS_FAILURE",t),void(n&&n());e.dispatch("FFETCH_STICKERS_SUCCESS",o),n&&n()})}},2536:function(e,t){e.exports=function(e,t,n){var i=t.status||!1;e.dispatch("HANDLE_STICKER_PREVIEW_LAYOUT",{status:i,previewStickerTitle:t.previewStickerTitle,previewStickerUrl:t.previewStickerUrl,previewStickerPosition:t.previewStickerPosition})}},2537:function(e,t){e.exports=function(e,t,n){var i=t.categoryId;if(!i)return n&&n();e.getStore("StickerStore").getCurrentCategoryId()!==i&&e.dispatch("UPDATE_STICKER_CATEGORY_ID",i)}},2538:function(e,t,n){"use strict";e.exports=function(e,t,n){var i=(t=t||{}).args||{};t.isSelected?e.service.delete("UserTagService",i,function(t){return t?n&&n(t):(e.dispatch("FETCH_USER_TAG_SUCCESS",{userTags:[]}),n&&n())}):e.service.update("UserTagService",i,{},function(t,r){return t||!r?n&&n(t):(delete i.guid,i.time=r,e.dispatch("FETCH_USER_TAG_SUCCESS",{userTags:[i]}),n&&n())})}},2539:function(e,t,n){"use strict";e.exports=function(e,t,n){e.dispatch("TRUNCATE_MESSAGES",t),n&&n()}},2540:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){return(t=t||{}).videoId?(i.checkInWithUuid(t.videoId,t.fromOid,t.toOid),n&&n()):n&&n()}},2541:function(e,t,n){"use strict";var i=n(1342);e.exports=function(e,t,n){t=t||{},e.dispatch("UPDATE_CHEERS",t),i.cheerWithUUID(t.uuid,t.side)}},2542:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(22),o=n(46),s=n(2),a=n(1),c=n(4),l=n(19),u=n(125).ComponentMixin,h=n(338),d=n(2522),f=n(2523),p=n(2279),_=n(2531),g=n(1909),m=n(2283),v=n(526),y=n(536),E=n(525),b=n(2547),S=n(2548),C=n(2550),k=n(1416).isLiveOn,w=c({displayName:"ChatBox",mixins:[l,u,h],statics:{initializeAction:f,storeListeners:[v,y,m],componentConfig:{name:"componentChatBox"},ignoreImmutableCheck:{props:{componentConfig:!0,i13n:"SKIP_SHOULD_UPDATE",i13nModel:"SKIP_SHOULD_UPDATE",messages:"SKIP_SHOULD_UPDATE"}}},propsType:{componentConfig:s.object},getDefaultProps:function(){return{componentConfig:{}}},getStateOnChange:function(){var e,t,n,i=this.getStore(y),r=this.getStore(v),s=this.getStore(E),a=this.getStore(m),c=this.state||{},l=c.isLiveOn,u=c.uuid,h=i.getUUID();return e=i.getEndTime(),t=i.getModerationType(),this._isInfoLoaded=i.isInfoLoaded(),u&&u!==h?(this.cleanup(),this.context.executeAction(d,{uuid:u,shouldDispatchEvent:!0})):l&&!k(e)&&(this._isUpdatedInfoLoaded=!0,this.context.executeAction(d,{uuid:h,shouldDispatchEvent:!1,shouldGoOffline:!0})),(n=r.getProfile()||{}).isSignedIn=s.isSignedIn(),n.guid=s.getGUID(),n=o.fromJS(n),{config:o.fromJS(this.props.componentConfig)||o.Map(),moderationType:t,isLiveOn:k(e),profile:n,uuid:h,checkInOptions:a.getCheckIn().get("options",o.Map()),selectedOptionId:a.getUserTags().getIn([0,"oid"])}},render:function(){var e=this.state||{};if(!e.uuid||!this._isInfoLoaded)return null;var t=this.getStore(g).isEndorsementEnabled(),n=this.getStore(m).isCheckInEnabled(),s=e.config||o.Map(),c=s.get("width","370px"),l=s.get("height","467px"),u=s.get("showPromotedMessage",!0),h=s.get("showTextInputAvatar",!1),d=s.get("showCheckInBadge",!1),f=s.get("stretched",!1),p=t&&s.get("heightIncrementOnEndorsement",0)||0,_=n&&s.get("heightDecrementOnCheckIn",0)||0,v=s.getIn(["ui","theme"],"default"),y=s.getIn(["ui",v],o.Map()),E=y.getIn(["wrapperClassName"],"");n&&(y=y.merge(s.getIn(["ui","overwriteWithCheckIn",v],o.Map())));var k={height:parseInt(l,10)+parseInt(p,10)-parseInt(_,10)+"px",paddingBottom:y.get("textInputHeight","45px")};f&&(k={paddingBottom:y.get("textInputHeight","45px"),position:"absolute",top:0,bottom:0,width:"100%"});var w=s.get("promotedMessageContainerClass",null);w||(w=y.get("promotedMessageContainerClass"));var I=s.get("promotedMessageBackgroundColor",null);I||(I=y.get("promotedMessageBackgroundColor"));var x=s.get("promotedMessageIconColor",null);x||(x=y.get("promotedMessageIconColor"));var T=s.get("promotedMessageLinkColor",null);T||(T=y.get("promotedMessageLinkColor"));var j,O=e.profile||o.Map(),P=O.get("isSignedIn")||!1,A=s.get("signInUrl"),F=O.get("imageUrl"),U=r("D(b) Pos(r) Bxz(bb)",y.get("containerClass",""),"chatbox-"+v+"-theme"),M=e.checkInOptions.get(e.selectedOptionId);F.match("profile_b[0-9]+.")&&(F=null),j={uuid:e.uuid,moderationType:e.moderationType,isLiveOn:e.isLiveOn,guid:O.get("guid"),image:F,nickName:O.get("nickName"),messageSubmitInterval:s.get("messageSubmitInterval"),isSignedIn:P,signInUrl:A,ui:y,showTextInputAvatar:h,showCheckInBadge:d&&M,selectedOptionId:e.selectedOptionId},h&&(j.avatar={name:O.get("nickName"),size:30,src:F},d&&M&&(j.avatar.badgeColor=M.get("color"),j.avatar.badgeSrc=M.get("tintIconUrl")||M.get("iconUrl")));var D=r("tdv2-applet-abu-chatbox Pos(r)",{"Pb(25px)":!f,"Flxg(1)":f},E);return a.createElement("div",{className:D,style:{width:c}},u?a.createElement(S,{uuid:e.uuid,isLiveOn:e.isLiveOn,containerClass:w,backgroundColor:I,iconColor:x,linkColor:T}):null,a.createElement("div",{className:U,style:k},a.createElement(b,{uuid:e.uuid,isLiveOn:e.isLiveOn,currentUserGuid:O.get("guid"),loadMoreTriggerOffset:s.get("loadMoreTriggerOffset"),maxMessagesInStore:s.get("maxMessagesInStore"),messageTruncateBuffer:s.get("messageTruncateBuffer"),showCheckInBadge:d,checkInOptions:e.checkInOptions,selectedOptionId:e.selectedOptionId,textInputData:j,i13n:this.props.i13n,ui:y}),a.createElement(C,i({},j,{i13n:this.props.i13n}))))},componentDidMount:function(){((this.state||{}).config||o.Map()).get("firebaseJsPreload")?this.setupInfoIfNeeded():this.ensureFirebaseJSLoad(this.setupInfoIfNeeded)},componentDidUpdate:function(e,t){this.state.uuid!==t.uuid&&this.setupInfoIfNeeded()},ensureFirebaseJSLoad:function(e){"undefined"!=typeof window&&window.Firebase?e():this.loadFirebaseJS(function(){e()})},loadFirebaseJS:function(e){var t=(this.state||{}).config||o.Map();this.loadScript({link:t.get("firebaseJsUrl")},e)},setupInfoIfNeeded:function(){var e=this.state||{},t=e.uuid;this._isInfoLoaded||this.context.executeAction(p,{uuid:t}),e.isLiveOn&&(this._isUpdatedInfoLoaded||(this.context.executeAction(_,{uuid:t}),this._isUpdatedInfoLoaded=!0))},cleanup:function(){this._isInfoLoaded=!1,this._isUpdatedInfoLoaded=!1}});e.exports=w},2543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s;function a(){return s=w(n(1))}var c;function l(){return c=w(n(22))}var u;var h;function d(){return h=w(n(46))}var f;var p;var _;var g;function m(){return g=w(n(2538))}var v;function y(){return v=w(n(2540))}var E;function b(){return E=n(94)}var S;var C;function k(){return C=n(1416)}function w(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=n(2278),O=n(1342),P=function(e){T(t,(s||a()).default.Component);function t(e){I(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showBackgroundColor:!1},n.handleMouseDown=n.handleMouseDown.bind(n),n}return o(t,[{key:"handleMouseDown",value:function(){this.props.optionClickable&&this.setState({showBackgroundColor:!0})}},{key:"componentWillReceiveProps",value:function(e){e.active&&this.setState({showBackgroundColor:!1})}},{key:"render",value:function(){var e=this.props,t=e.name,i=e.users,r=e.active,o=e.color,u=e.iconUrl,h=e.optionClickable,d=e.isSignedIn,p=e.tintIconUrl,_=e.clickHandler,g=Object.assign({},{t1:"a3",t2:"vid",t3:"ct",sec:"vid",slk:"checkin",cat:t,elm:"btn",elmt:"cl",itc:"1",pkgt:"4",ct:"3"}),m=(0,(c||l()).default)("checkin-option","D(ib) Bxz(bb) My(5px) Px(4px) H(40px)","Bdrs(3px) Bgc(light-white):h",{active:r,"Cur(p)":h,"Cur(na)":!h}),v=(0,(c||l()).default)("checkin-option-icon","D(ib) Bdrs(100%) Va(m) Bgc(light-white) Bgz(ct)",{"M(4px) W(32px) H(32px)":!r,"M(0) W(40px) H(40px)":r}),y={backgroundImage:"url('"+(p||u)+"')"};return(r||this.state.showBackgroundColor)&&(y.backgroundColor="#"+o),(s||a()).default.createElement((f||(f=n(56))).I13nDiv,{className:m,onClick:_,bindClickEvent:h&&d,i13nModel:g,onMouseDown:this.handleMouseDown},(s||a()).default.createElement("div",{className:v,style:y}),(s||a()).default.createElement("div",{className:"checkin-option-body D(ib) Mstart(4px) Pt(2px) Va(m)"},(s||a()).default.createElement("div",{className:"Fz(13px) Lh(1.2)"},t),(s||a()).default.createElement("div",{className:"Fz(13px) Lh(1.2) Mt(2px)"},i||0)))}}]),t}(),A=function(e){T(t,(s||a()).default.Component);function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,[{key:"render",value:function(){var e=this.props,t=e.clickHandler,n=e.direction,i=(0,(c||l()).default)("checkin-nav Pos(a) T(0) B(0) Z(2) W(90px) Pe(n)",{"checkin-nav-right Bgi(nav-right) End(0)":"right"===n,"checkin-nav-left Bgi(nav-left) Start(0)":"left"===n}),r=(0,(c||l()).default)("checkin-nav-arrow","Bgc(option-arrow) Pos(a) T(9px) W(29px) H(32px) Cur(p) Pe(v) Ta(c)",{"End(0)":"right"===n,"Start(0)":"left"===n});return(s||a()).default.createElement("div",{className:i,onClick:t},(s||a()).default.createElement("div",{className:r},(s||a()).default.createElement((E||b()).Icon,{name:"caret-"+n,width:24,height:32,color:"#400090"})))}}]),t}(),F=function(e){T(t,(s||a()).default.Component);function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,[{key:"componentDidMount",value:function(){setTimeout(this.props.hideTooltip,5e3)}},{key:"render",value:function(){var e=this.props.hideTooltip;return(s||a()).default.createElement("div",{className:"checkin-tooltip Pos(a) B(-36px) Start(50%) Z(12) Bxz(bb) Mstart(-120px) Px(14px) Py(10px) W(240px) H(40px) Bdrs(3px) Bxsh(promoted-msg) Us(n)",style:{backgroundColor:"#ffd333",color:"#444"}},(s||a()).default.createElement("span",{className:"Pos(a) T(-6px) Start(40%) W(0) H(0) Bds(s) Bdc(t)",style:{borderWidth:"0 5px 6px 5px",borderBottomColor:"#ffd333"}}),(s||a()).default.createElement("span",{className:"Fz(16px) Lh(20px)"},(s||a()).default.createElement((S||(S=n(76))).FormattedMessage,{id:"CHECKIN_TOOLTIP"})),(s||a()).default.createElement("div",{className:"Pos(a) End(8px) T(50%) Mt(-20px)",onClick:e},(s||a()).default.createElement((E||b()).Icon,{name:"close",width:24,height:40,color:"#fff"})))}}]),t}(),U=function(e){T(t,(s||a()).default.Component);function t(){var e,n,i;I(this,t);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return n=i=x(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),i.state={scrollOffset:0,isCoolingDown:!1},x(i,n)}return o(t,[{key:"fetchCheckInOptions",value:function(e){var t=e.checkIn,i=e.guid,r=e.videoId;this.context.executeAction((p||(p=w(n(2526)))).default,{checkInId:t.get("id"),uuid:r}),this.authIfNeeded(r,i)}},{key:"componentWillMount",value:function(e){var t=this.props,i=t.checkIn,r=t.guid,o=t.isSignedIn;i&&o&&this.context.executeAction((_||(_=w(n(2533)))).default,{guid:r,qid:i.get("id")})}},{key:"componentDidMount",value:function(){this.props.isCheckInEnabled&&this.fetchCheckInOptions(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.checkIn,i=t.guid,o=t.userTags,s=t.videoId,a=e.checkIn.get("id");if(a&&a!==n.get("id")&&this.fetchCheckInOptions(e),void 0===this.state.shouldShowTooltip&&e.userTags&&this.setState({shouldShowTooltip:0===e.userTags.size}),e.userTags!==o&&(h||d()).default.List.isList(e.userTags)){var c=e.userTags.getIn([0,"videoId"]);this.setState({isCoolingDown:!1}),c&&c!==s&&(this.context.executeAction((g||m()).default,{args:r({},e.userTags.get(0,(h||d()).default.Map()).toJS(),{guid:i,videoId:s}),isSelected:!1}),this.context.executeAction((v||y()).default,{videoId:s,toOid:e.userTags.getIn([0,"oid"])}))}}},{key:"componentDidUpdate",value:function(e,t){if(this.props.checkIn.get("options")!==e.checkIn.get("options")){var n=this.container&&this.container.getElementsByClassName("active")[0];if(!n)return;var i=Math.floor(n.offsetLeft/this.viewport.offsetWidth/.5);this.setState({scrollOffset:50*i})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.isCoolingDown,i=t.scrollOffset,o=t.shouldShowTooltip,u=this.props,f=u.checkIn,p=u.isCheckInEnabled,_=u.userTags,g=void 0===_?(h||d()).default.List():_,m=u.endTime,v=u.isSignedIn,y=u.componentConfig.width;if(!p)return null;var E=f.toJS(),b=E.title,S=void 0===b?"":b,w=E.options,I=void 0===w?{}:w,x=E.users,T=void 0===x?{}:x,j=g.get(0,(h||d()).default.Map()).toJS().oid,O=(0,(C||k()).isLiveOn)(m)&&!n,U=Object.keys(I).sort().map(function(t){var n=t===j,i=r({},I[t],{key:t,users:T[t],active:n,optionClickable:O,isSignedIn:v,clickHandler:e.toggleOption.bind(e,t,n)});return(s||a()).default.createElement(P,i)},this),M={left:-i+"%"},D=0===i||this.container&&this.viewport&&i/100+1<this.container.offsetWidth/this.viewport.offsetWidth,R=(0,(c||l()).default)("checkin-container D(ib) Pos(r) H(50px) Z(1) Px(12px) Whs(nw) Trs(options)",{"C(#b4b4b4)":!O});return(s||a()).default.createElement("div",{className:"checkin Bgc(yPurple) C(white) Fw(300) Pos(r)",style:{width:y}},(s||a()).default.createElement("div",{className:"checkin-header Px(12px) H(50px) Fz(16px) Lh(50px)"},S),(s||a()).default.createElement("div",{className:"checkin-seperator Mx(12px) Bdbc(white) Bdbs(s) Bdbw(1px) Op(0.2)"}),(s||a()).default.createElement("div",{className:"checkin-viewport Pos(r) Ov(h) H(50px) Us(n)",ref:function(t){return e.viewport=t}},(s||a()).default.createElement("div",{className:R,style:M,ref:function(t){return e.container=t}},U),i>0?(s||a()).default.createElement(A,{direction:"left",clickHandler:this.scrollOptions.bind(this,-50)}):null,D?(s||a()).default.createElement(A,{direction:"right",clickHandler:this.scrollOptions.bind(this,50)}):null),(0,(C||k()).isLiveOn)(m)&&o?(s||a()).default.createElement(F,{hideTooltip:this.hideTooltip.bind(this)}):null)}},{key:"hideTooltip",value:function(){this.setState({shouldShowTooltip:!1})}},{key:"toggleOption",value:function(e,t){if((0,(C||k()).isLiveOn)(this.props.endTime)&&!this.state.isCoolingDown){this.setState({isCoolingDown:!0});var n=this.props,i=n.checkIn,o=n.guid,s=n.videoId,a=n.channelId,c=n.isSignedIn,l=n.componentConfig.signInUrl;if(c){this.context.executeAction((g||m()).default,{args:r({guid:o,qid:i.get("id"),oid:e},i.getIn(["options",e],(h||d()).default.Map()).toJS(),{type:i.get("type"),videoId:s,channelId:a,channelName:""}),isSelected:t});var u=this.props.userTags.getIn([0,"oid"]);this.context.executeAction((v||y()).default,{videoId:s,fromOid:t?e:u,toOid:t?null:e})}else(0,(C||k()).redirectToSignIn)(l)}}},{key:"scrollOptions",value:function(e){this.setState({scrollOffset:this.state.scrollOffset+e})}},{key:"authIfNeeded",value:function(e,t){"undefined"!=typeof window&&window&&e&&t&&!O.isAuthed()&&this.context.executeAction(j,{uuid:e,guid:t})}}]),t}();U.contextTypes={executeAction:(i||(i=w(n(2)))).default.func.isRequired},U.componentConfig={name:"componentCheckIn"},t.default=(0,(u||(u=n(125))).createImmutableContainer)(U,{stores:["CheckInStore","StreamingInfoStore","UserStore"],ignore:["messages","i13n","i13nModel","componentConfig"],getStateFromStores:function(e,t){var n=e.getStore("CheckInStore"),i=e.getStore("StreamingInfoStore"),r=e.getStore("UserStore");return{checkIn:n.getCheckIn(),isCheckInEnabled:n.isCheckInEnabled(),guid:r.getGUID(),isSignedIn:r.isSignedIn(),userTags:n.getUserTags(),videoId:i.getUUID(),channelId:i.getChannelId(),endTime:i.getEndTime()}}}),e.exports=t.default},2544:function(e,t,n){"use strict";var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n(22),o=n(1316),s=n(46),a=n(1),c=n(4),l=n(29),u=n(19),h=n(125).ComponentMixin,d=n(2529),f=n(2541),p=n(1909),_=n(2551),g=n(76).FormattedMessage,m=n(76).FormattedNumber,v=n(310).Img,y=n(56).I13nDiv,E=n(1342),b=n(1416).isBelowIE9,S="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}:function(){},C="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}:function(){},k=c({displayName:"Bars",mixins:[h],statics:{ignoreImmutableCheck:{props:{i13n:"SKIP_SHOULD_UPDATE"}}},getDefaultProps:function(){return{config:s.Map(),uuid:null,isLiveOn:!1,isSignedIn:!1,teams:s.Map()}},getEstimatedStringWidthOfNumber:function(e){if("number"!=typeof e)return 0;if(e>=E.MAX_CHEERS)return 15;e+="";var t=Math.floor((e.length-1)/3);return 9*e.length+3*t},render:function(){var e=this.props.teams,t=this.props.config.get("width"),n=e.getIn(["left","cheers"],0),i=e.getIn(["right","cheers"],0),r=n/(n+i||1)*100,o={backgroundColor:0===n?"#aaa":"#"+this.props.teams.getIn(["left","color"]),width:0===n&&0===i?"50%":r+"%",minWidth:95+this.getEstimatedStringWidthOfNumber(n)+"px",maxWidth:parseInt(t,10)-95-this.getEstimatedStringWidthOfNumber(i)+"px"},s={backgroundColor:0===i?"#aaa":"#"+this.props.teams.getIn(["right","color"])},c=n>=E.MAX_CHEERS?a.createElement(g,{id:"CHEERS_OVERFLOW"}):a.createElement(m,{value:n}),l=i>=E.MAX_CHEERS?a.createElement(g,{id:"CHEERS_OVERFLOW"}):a.createElement(m,{value:i});return a.createElement("div",{className:"W(100%) H(100%) Fz(15px) C(#fff) Pos(r)",style:s,ref:"bars"},a.createElement("div",{className:"D(ib) H(100%) Ta(end) Va(t)",style:o},a.createElement("div",{className:"D(ib) Mend(6px) Va(t) Pos(r) T(50%) Mt(-10px)"},c,a.createElement(_,{size:14,color:"#fff",isSoundOn:!1,className:"D(ib) Mstart(5px) Pos(r) T(1px)"}))),a.createElement("div",{className:"D(ib) W(2px) H(100%) Bgc(#3d424e) Va(t)"}),a.createElement("div",{className:"D(ib) Mstart(6px) Va(t) Pos(r) T(50%) Mt(-10px)"},a.createElement(_,{size:14,color:"#fff",isSoundOn:!1,isFlipped:!0,className:"D(ib) Mend(5px) Pos(r) T(1px)"}),l))}});k=o(k,[p],function(e,t){var n=e.getStore(p).getTeams();return Object.assign({},t,{teams:n})});var w=c({displayName:"AnimatedCheerMegaphone",getInitialState:function(){return{x:0,y:0,opacity:1,rotate:0}},getDefaultProps:function(){return{className:"",color:"#fff",side:"",animationRange:{width:20,height:415},animationEnabled:!1,animationCompleteHandler:function(){}}},componentWillReceiveProps:function(e){var t=this;this._cssAnimationEnabled||e.animationEnabled&&e.animationEnabled!==this.props.animationEnabled&&(this.initAnimationParams(),this.setState(this.getInitialState(),function(){t._requestId=S(t.animate)}))},shouldComponentUpdate:function(e,t){return this._cssAnimationEnabled?e.animationEnabled!==this.props.animationEnabled:t.x!==this.state.x||t.y!==this.state.y||t.opacity!==this.state.opacity||t.rotate!==this.state.rotate||e.animationEnabled!==this.props.animationEnabled},render:function(){for(var e,t,n,i,r,o,s,c,l,u=this.props.side,h=this.props.animationEnabled,d=[],f="left"===u?1:-1,p=null,g=0;g<4;g++)e=h&&this._shifts&&this._shifts[g]||0,this._cssAnimationEnabled?(t=((h?this.props.animationRange.width:50)-63*g)*f,i=0):i=f*(t=this.state.x+63*g*f*-1+e)>60?this.state.opacity:0,n=this.state.y+e/2,r=this.state.rotate+e,l=this.props.cheerSubmitInterval,o="translate("+t+"px,"+n+"px) rotate("+r+"deg)",s=h&&this._cssAnimationEnabled?"transform "+l+"s":null,c=h&&this._cssAnimationEnabled?"cheerOpacity"+g+" "+l+"s":null,p={opacity:i,transform:o,msTransform:o,WebkitTransform:o,transition:s,WebkitTransition:s?"-webkit-"+s:s,animation:c,WebkitAnimation:c},d.push(a.createElement(_,{size:42,ref:0===g?"cheerMegaphone":null,className:"Pos(a) Z(9999)",key:g,color:"#"+this.props.color,isSoundOn:!0,isPale:!0,isFlipped:"right"===u,style:p}));return p={width:42,height:42},a.createElement("div",{className:"Pos(r) B(20px)",style:p},d)},componentDidMount:function(){this._cssAnimationEnabled=!b(),this.setup()},componentWillUnmount:function(){this.tearDown()},componentWillUpdate:function(){this._cssAnimationEnabled&&this.initAnimationParams()},setup:function(){var e=this;this.initAnimationParams(),this._cssAnimationEnabled&&(this._element=l.findDOMNode(this.refs.cheerMegaphone),this._element&&this._element.addEventListener("transitionend",function(){e.props.animationCompleteHandler()}))},tearDown:function(){this._requestId&&C(this._requestId),this._element&&this._element.removeEventListener("transitionend",this.props.animationCompleteHandler),this._requestId=null,this._shifts=null,this._rotate=null,this._element=null,this._frame=0},initAnimationParams:function(){var e;this._rotate=25-50*Math.random(),this._shifts=[],this._frame=1;for(var t=0;t<4;t++)e=0===Math.floor(2*Math.random())?1:-1,this._shifts.push(20*Math.random()*e)},animate:function(){if(this.props.animationEnabled){this._requestId=S(this.animate);var e=1e3*this.props.cheerSubmitInterval/20;if(!(this._lastUpdateTime&&Date.now()-this._lastUpdateTime<e)){var t=this.props.animationRange,n="left"===this.props.side?1:-1,i=this.state.x+t.width/20*n,r=this._frame/20,o=r>.8?1-(r-.8)/.2:1,s=r*this._rotate;this._lastUpdateTime=Date.now(),this._frame++,r<=1?this.setState({x:i,y:0,opacity:o,rotate:s}):this.props.animationCompleteHandler()}}}}),I=c({displayName:"TeamIcon",mixins:[u,h],statics:{ignoreImmutableCheck:{props:{i13n:"SKIP_SHOULD_UPDATE"}}},getDefaultProps:function(){return{className:"",config:s.Map(),uuid:null,isLiveOn:!1,isSignedIn:!1}},getCurrentUrl:function(){if("undefined"!=typeof window)return window&&window.location&&window.location.href||""},redirectToSignIn:function(){var e=this.getCurrentUrl(),t=this.props.config.get("signInUrl");e&&t&&(t=t.replace("[REDIRECT_URL]",e),window.location.href=t)},cheer:function(e){if(this.props.uuid&&e){var t=this.props.config.get("cheerSubmitInterval")||1.5;this._lastSubmitTime&&Date.now()-this._lastSubmitTime<1e3*t||(this.context.executeAction(f,{uuid:this.props.uuid,side:e}),this._lastSubmitTime=Date.now(),this.setState({isCoolingDown:!0}))}},animationCompleteHandler:function(){this.setState({isCoolingDown:!1})},render:function(){var e=this.props.side,t=this.props.isSignedIn,n=this.props.isLiveOn,i=this.props.i13n,o=this.props.config.get("cheerSubmitInterval")||1.5,s=n?t?this.cheer.bind(this,e):this.redirectToSignIn:function(){},c="brightness(0.6)",l=this.state.isCoolingDown?{filter:c,msFilter:c,WebkitFilter:c}:null,u=r("Pos(a) B(0) Z(10000)",{"Start(0)":"left"===e,"End(0)":"right"===e,"Cur(p)":n&&!this.state.isCoolingDown}),h={width:parseInt(this.props.config.get("width"),10)/2,height:10};return a.createElement("div",{className:this.props.className},a.createElement("div",{className:"Pos(r) B(0)"},a.createElement(w,{color:this.props.color,side:e,animationRange:h,cheerSubmitInterval:o,animationEnabled:this.state.isCoolingDown,animationCompleteHandler:this.animationCompleteHandler}),a.createElement(y,{bindClickEvent:n&&t,i13nModel:i},a.createElement(v,{url:this.props.iconUrl,style:l,className:u,width:55,height:55,onClick:s}))))}}),x=c({displayName:"Cheer",mixins:[u,h],statics:{ignoreImmutableCheck:{props:{i13n:"SKIP_SHOULD_UPDATE"}}},getDefaultProps:function(){return{config:s.Map(),uuid:null,isLiveOn:!1,isSignedIn:!1}},render:function(){var e=this.getStore(p).getTeams()||s.Map(),t={width:this.props.config.get("width"),height:this.props.config.get("height"),background:"linear-gradient(180deg, rgba(0,0,0,0.7), rgba(0,0,0,1))"},n=function(e){return r("Pos(a) B(7px)",{"Start(10px)":e,"End(10px)":!e})},o=e.getIn(["left","iconUrl"],""),c=e.getIn(["right","iconUrl"],"");return a.createElement("div",{className:"H(70px) Pt(50px) Bxz(bb) Pos(r)",style:t},a.createElement(k,this.props),a.createElement("div",{className:"Pos(a) W(100%) H(3px) Bgc(#fff) Op(0.2) B(0)"}),a.createElement(I,i({className:n(!0),side:"left",iconUrl:o,color:e.getIn(["left","color"],null)},this.props)),a.createElement(I,i({className:n(!1),side:"right",iconUrl:c,color:e.getIn(["right","color"],null)},this.props)))},componentDidMount:function(){this.setupIfNeeded()},componentDidUpdate:function(){this.setupIfNeeded()},setupIfNeeded:function(){var e=this.props.uuid;e&&!this._hasLoadedUpdatedCheers&&(this.props.isLiveOn&&(this.context.executeAction(d,{uuid:e,side:"left"}),this.context.executeAction(d,{uuid:e,side:"right"})),this._hasLoadedUpdatedCheers=!0)}});e.exports=x},2545:function(e,t,n){"use strict";var i=n(46),r=n(2),o=n(1),s=n(4),a=n(19),c=n(125).ComponentMixin,l=n(2278),u=n(1909),h=n(526),d=n(536),f=n(525),p=n(2544),_=n(2546),g=n(1342),m=n(1416).isLiveOn,v=s({displayName:"EndorseBanner",mixins:[a,c],statics:{storeListeners:[u,h,d],componentConfig:{name:"componentEndorseBanner"},ignoreImmutableCheck:{props:{componentConfig:!0,i13n:"SKIP_SHOULD_UPDATE",messages:"SKIP_SHOULD_UPDATE"}}},propsType:{componentConfig:r.object},getDefaultProps:function(){return{componentConfig:{}}},getStateOnChange:function(){var e=this.getStore(u),t=this.getStore(d),n=this.getStore(h),r=this.getStore(f),o=this.state||{},s=t.getEndTime(),a=n.getProfile()||{},c=t.getUUID(),l=o.uuid,p=!!e.getTeams(),_="number"==typeof e.getFavor();return a.isSignedIn=r.isSignedIn(),a.guid=r.getGUID(),a=i.fromJS(a),l!==c&&g.unauth(),m(s)&&(p||_)&&this.authIfNeeded(c,a.get("guid",null)),{isLiveOn:m(s),profile:a,uuid:c,isTeamsEnabled:p,isFavorEnabled:_}},render:function(){var e,t=this.state||{},n=this.props.componentConfig||{},r={config:i.fromJS(n),uuid:t.uuid,isLiveOn:t.isLiveOn,isSignedIn:t.profile.get("isSignedIn"),i13n:{t1:"a3",t2:"vid",t3:"ct",sec:"vid",elm:"btn",elmt:"cl",itc:"1",pkgt:"4",ct:"3"}};return t.isTeamsEnabled?(r.i13n.slk="cheers",e=o.createElement(p,r)):t.isFavorEnabled?(r.i13n.slk="favor",e=o.createElement(_,{isLiveOn:r.isLiveOn,uuid:r.uuid,isSignedIn:r.isSignedIn,signInUrl:n.signInUrl,i13n:r.i13n})):e=null,o.createElement("div",{className:n.containerClassName},e)},authIfNeeded:function(e,t){"undefined"!=typeof window&&window&&e&&t&&!g.isAuthed()&&this.context.executeAction(l,{uuid:e,guid:t})}});e.exports=v},2546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s;function a(){return s=E(n(1))}var c;function l(){return c=n(94)}var u;function h(){return u=E(n(22))}var d;var f;var p;var _;var g;var m;function v(){return m=E(n(1909))}var y;function E(e){return e&&e.__esModule?e:{default:e}}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(s||a()).default.Component);function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.addFavor=n.addFavor.bind(n),n.setupFirebase=n.setupFirebase.bind(n),n.state={showFavorIcons:!1},n._favorIconConfig=[{color:"#fd8196",width:43,height:38},{color:"#fd8196",width:13,height:11},{color:"#a48a9a",width:24,height:21},{color:"#a48a9a",width:10,height:8}],n}return o(t,[{key:"render",value:function(){var e=[],t=this.state.showFavorIcons,i=this.props,r=i.isSignedIn,o=i.isLiveOn,d=i.favor,f=i.i13n;this._favorIconConfig.forEach(function(n,i){var r=(0,(u||h()).default)("Pos(a) Trsp(a)",{"Op(0) Translate(0,0)":!t,"favor-animating":t,"Translate(25px,-40px)":t&&0===i,"Translate(40px,-100px)":t&&1===i,"Translate(75px,-100px)":t&&2===i,"Translate(35px,-150px)":t&&3===i}),o=(0,(u||h()).default)({"favor-animating-container":t&&0===i}),d={transitionDuration:(t?700:0)+"ms"};e.push((s||a()).default.createElement("div",{key:i,className:o},(s||a()).default.createElement((c||l()).Icon,{className:r,style:d,name:"heart",width:n.width,height:n.height,color:n.color})))});var g=t||!o?(s||a()).default.createElement("div",{className:"Pos(a) Bdrs(50%) Start(11px) T(12px) W(50px) H(50px) Bgc(gray-overlay)"}):null;return(s||a()).default.createElement("div",null,(s||a()).default.createElement("div",{className:"H(71px) Pos(r) Bgc(black)"},(s||a()).default.createElement("div",{className:"favor-banner-shadow Pos(a) W(100%) H(100%) Z(1) Us(n)"},(s||a()).default.createElement((_||(_=n(56))).I13nDiv,{className:"D(ib)",bindClickEvent:o&&r,i13nModel:f},(s||a()).default.createElement("img",{onClick:this.addFavor,className:"Mt(12px) Mstart(11px) Pos(r)",width:"50",src:"https://s.yimg.com/dh/ap/default/160701/button-for-like@3x.png"})),g,(s||a()).default.createElement((c||l()).Icon,{className:"Mstart(13px)",name:"heart",width:13,height:12,color:t?"#FF8095":"#8F8897"}),(s||a()).default.createElement("span",{className:"Mstart(5px) Fz(15px) C(white) Pos(a) B(6px)"},(s||a()).default.createElement((p||(p=n(76))).FormattedNumber,{value:d})),(s||a()).default.createElement("div",{className:"D(ib) Va(t) Mt(40px)"},this._isBelowIE9?null:e))),(s||a()).default.createElement("div",{className:"H(1px) W(100%) Bgc(light-white)"}))}},{key:"componentDidMount",value:function(){this._isBelowIE9=(0,(f||(f=n(1416))).isBelowIE9)(),this._favorIconConfig=this.perfectRandom(this._favorIconConfig),this.setupFirebase()}},{key:"componentDidUpdate",value:function(){this._favorIconConfig=this.perfectRandom(this._favorIconConfig)}},{key:"getRaf",value:function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)}}},{key:"addFavor",value:function(){var e=this;if(this.props.isLiveOn)if(this.props.isSignedIn){if(!this.state.showFavorIcons){this.setState({showFavorIcons:!0},function(){setTimeout(function(){e.setState({showFavorIcons:!1})},700)});this.getRaf()(function(){(y||(y=E(n(1342)))).default.addFavorWithUUID(e.props.uuid)})}}else this.redirectToSignIn()}},{key:"perfectRandom",value:function(e){if(!e.length||e.length<1)return e;for(var t=0;t<10;++t){var n=Math.floor(10*Math.random());if(e[n]){var i=e[0];e[0]=e[n],e[n]=i}}return e}},{key:"setupFirebase",value:function(){var e=this.props.uuid;e&&this.context.executeAction((g||(g=E(n(2530)))).default,{uuid:e})}},{key:"redirectToSignIn",value:function(){var e=this.getCurrentUrl(),t=this.props.signInUrl;e&&t&&(t=t.replace("[REDIRECT_URL]",e),window.location.href=t)}},{key:"getCurrentUrl",value:function(){if("undefined"!=typeof window)return window&&window.location&&window.location.href||""}}]),t}();b.contextTypes={executeAction:(i||(i=E(n(2)))).default.func.isRequired},b.defaultProps={isSignedIn:!1},t.default=(0,(d||(d=E(n(1316)))).default)(b,[(m||v()).default],function(e,t){var n=e.getStore((m||v()).default).getFavor();return r({},t,{favor:n})}),e.exports=t.default},2547:function(e,t,n){"use strict";var i=n(22),r=n(46),o=n(1),s=n(4),a=n(19),c=n(125).ComponentMixin,l=n(2528),u=n(2524),h=n(2532),d=n(2539),f=n(2096),p=n(76).FormattedMessage,_=n(76).FormattedRelative,g=n(1442),m=n(2282),v=n(2549),y=s({displayName:"Notice",getDefaultProps:function(){return{scrollToBottom:function(){},ui:r.Map()}},render:function(){var e={backgroundColor:"rgba(91,91,91,0.84)",bottom:this.props.ui.get("textInputHeight","45px")};return o.createElement("div",{className:"Pos(a) D(tb) W(100%) H(35px) Ta(c) Fz(14px) C(white) Cur(p)",style:e,onClick:this.props.scrollToBottom},o.createElement("div",{className:"D(tbc) Va(m)"},o.createElement(p,{id:"NEW_MESSAGE"})))}}),E=s({displayName:"Message",getDefaultProps:function(){return{message:r.Map(),isFirstMessage:!1,position:0,ui:r.Map(),scrollIfNeeded:function(){},showCheckInBadge:!1,checkInOptions:r.Map(),selectedOptionId:null}},render:function(){var e,t=this.props.showCheckInBadge,n=this.props.checkInOptions,s=this.props.selectedOptionId,a=this.props.message||r.Map(),c=a.get("guid"),l="editor"===c?o.createElement(p,{id:"MODERATOR"}):a.get("name"),u=a.get("image"),h=a.get("text"),d=a.get("time"),f=a.get("stickerSrc"),v=a.get("stickerLink"),y=a.get("isUserSticker"),E=a.get("checkInOptionId"),b=this.props.ui,S=i("Mx(12px) Pt(7px) Pstart(45px) Pend(12px)",{"Bdtw(1px) Bdts(s)":!this.props.isFirstMessage,"Bd(n)":this.props.isFirstMessage},b.get("messageClass","")),C=i("D(ib) Mt(4px) W(100%) Wow(bw) Fz(14px)",b.get("messageTextClass","")),k=o.createElement("span",null,h),w=null,I={name:l,size:30,src:u},x=n.get(E);if(t&&x&&(e=x.get("tintIconUrl")?"9b9b9b":"ffffff",I.badgeColor=s===E?x.get("color"):e,I.badgeSrc=x.get("tintIconUrl")||x.get("iconUrl")),"editor"===c){var T;(T=/(.*)\b(https?:\/\/?[\S]+)\b(.*)/gi.exec(h))&&(k=o.createElement("span",null,T[1],o.createElement("a",{href:T[2],target:"_blank",rel:"noopener noreferrer"},T[2]),T[3]))}var j;return void 0!==f&&(j=i("Maw(100%) Mt(4px) H(a)",{"W(147px)":y}),w=o.createElement("img",{className:j,src:f,onLoad:this.props.scrollIfNeeded})),o.createElement("div",{className:"message Pos(r) Pb(7px) Bxz(bb)","data-position":this.props.position},o.createElement("div",{className:S},o.createElement("div",{className:"Va(t) Pos(a) Start(12px)"},t&&x?o.createElement(m,I):o.createElement(g,I)),o.createElement("div",{className:"D(ib) W(100%)"},o.createElement("div",{className:"C(#9b9b9b) W(100%) Wow(bw) Cf"},o.createElement("div",{className:"D(ib) Fl(start)"},l),o.createElement("div",{className:"D(ib) Fl(end) Fz(12px) Va(t)"},o.createElement(_,{value:d}))),h&&!y?o.createElement("div",{className:C},k):null,v?o.createElement("a",{href:v,target:"_blank",rel:"noopener noreferrer"},w):w)))}}),b=s({displayName:"Messages",mixins:[a,c],statics:{storeListeners:[f],ignoreImmutableCheck:{props:{textInputData:"SKIP_SHOULD_UPDATE",i13n:!0}}},getDefaultProps:function(){return{uuid:null,isLiveOn:!1,currentUserGuid:null,maxMessagesInStore:1e3,messageTruncateBuffer:40,loadMoreTriggerOffset:50,ui:r.Map(),showCheckInBadge:!1,checkInOptions:r.Map(),selectedOptionId:null}},getStateOnChange:function(){var e=this.getStore(f),t=e.hasLoadedMessages(),n=e.getKeys()||r.List(),i=e.getMessageMap()||r.Map(),o=this.props.uuid,s=this.state&&this.state.shouldShowNotice;return this._isAtOldestMessage=e.isAtOldestMessage(),this._type=e.getType(),this._lastMessage=e.getLastMessage(),this._keyCountBeforeUpdate=this.state&&this.state.keys&&this.state.keys.count(),{hasLoadedMessages:t,keys:n,messageMap:i,uuid:o,shouldShowNotice:s}},render:function(){var e,t=this.state||{},n=t.keys||r.List(),i=t.messageMap||r.Map(),s=this.props.currentUserGuid,a=0,c=this.props.ui,l=this.props.showCheckInBadge,u=this.props.checkInOptions,h=this.props.selectedOptionId,d=this.props.textInputData,f=n.map(function(e,t){var n=i.get(e),r=n.get("guid"),d=n.get("approved")&&!n.get("spam"),f=0===a;return s===r||d?(a++,o.createElement(E,{message:n,key:a,isFirstMessage:f,position:t,ui:c,scrollIfNeeded:this.scrollIfNeeded,showCheckInBadge:l,checkInOptions:u,selectedOptionId:h})):null},this),p={height:(1.005*100).toFixed(1)+"%"};return t.hasLoadedMessages||0!==n.count()||(f=o.createElement("div",{className:"yvp-spinner-icon W(60px) H(60px) Pos(a) T(50%) Start(50%) Mt(-40px) Mstart(-30px)"})),e=t.shouldShowNotice?o.createElement(y,{scrollToBottom:this.scrollToBottom,ui:c}):null,this._scrollHeightBeforeUpdate=this._messageBoxElement&&this._messageBoxElement.scrollHeight||0,this._scrollTopBeforeUpdate=this._messageBoxElement&&this._messageBoxElement.scrollTop||0,this._isLoadingMore=!1,o.createElement("div",{className:"W(100%) H(100%)"},o.createElement("div",{className:"chatbox-scrollbox W(100%) H(100%) Ovy(s) Ovx(h)",ref:"messageBox"},o.createElement("div",{style:p},f),e),o.createElement(v,{textInputData:d,i13n:this.props.i13n}))},componentDidMount:function(){this.setupIfNeeded(),this.scrollIfNeeded()},componentDidUpdate:function(){this.setupIfNeeded(),this.scrollIfNeeded()},componentWillUnmount:function(){this.teardown()},setupIfNeeded:function(){if(!this.state||!this.state.hasLoadedMessages)return this.setupMessage(!0),void this.setupScroll(!1);this._hasLoadedAddedMessages||this.setupMessage(!1)},setupMessage:function(e){var t,n,i,r,o,s,a=this.state||{},c=a.uuid;if(e)this.context.executeAction(l,{uuid:c});else{if(!this.props.isLiveOn)return;i=a.keys,s=a.messageMap,o=(r=i.get(i.count()-1,null))&&s.getIn([r,"time"],1),this.context.executeAction(u,{uuid:c,timestamp:o}),n=(t=i.get(0))&&s.getIn([t,"time"],1),this.context.executeAction(h,{uuid:c,timestamp:n}),this._hasLoadedAddedMessages=!0}},setupScroll:function(){this._isLoadingMore=!1,this._isAtOldestMessage=!1,this._scrollTopBeforeUpdate=0,this._scrollTopBeforeScroll=0,this._messageBoxElement=this.refs.messageBox,this._messageBoxElement&&(this._messageBoxElement.addEventListener("DOMMouseScroll",this.handleMouseScroll),this._messageBoxElement.addEventListener("mousewheel",this.handleMouseScroll),this._messageBoxElement.addEventListener("scroll",this.handleScroll))},handleMouseScroll:function(e){var t,n,i,r=e&&e.wheelDelta||e&&-e.detail;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1,i=(n=(t=e.target||e.srcElement)&&t.offsetParent)&&n.getAttribute("data-position")||t&&t.getAttribute("data-position"),i=parseInt(i,10)),0!==r&&this.scrollTo(this._messageBoxElement.scrollTop+10*(r<0?1:-1),i)},handleScroll:function(e){this.isScrolledAtBottom()&&this.hideNotice(),(this._scrollTopBeforeScroll>this._messageBoxElement.scrollTop||0===this._scrollTopBeforeScroll&&0===this._messageBoxElement.scrollTop)&&this.loadOlderMessagesIfNeeded(),this._scrollTopBeforeScroll=this._messageBoxElement.scrollTop},loadOlderMessagesIfNeeded:function(){var e,t,n,i,r,o=this.state||{},s=this.props.loadMoreTriggerOffset;this._messageBoxElement.scrollTop>s||this._isAtOldestMessage||this._isLoadingMore||(n=o.keys,i=o.messageMap,t=(e=n.get(0,null))&&i.getIn([e,"time"]),r=o.uuid,this._isLoadingMore=!0,this.context.executeAction(l,{uuid:r,beforeTimestamp:t}))},scrollIfNeeded:function(){var e,t;this.state&&this.state.keys&&this.state.keys.count()&&"NOTIFIED"!==this._type&&this._messageBoxElement&&(e=this._messageBoxElement.scrollHeight,this.wasScrolledAtBottomBeforeUpdate()||"FIRST"===this._type?(this.scrollToBottom(),this.truncateMessagesIfNeeded()):"OLDER"===this._type||"TRUNCATED"===this._type?(t=this.state&&this.state.keys&&this.state.keys.count()||0,this.scrollTo(this._scrollTopBeforeUpdate+(e-this._scrollHeightBeforeUpdate),this._scrolledAtMessage+t-this._keyCountBeforeUpdate)):(this.showNewMessageNoticeIfNeeded(),this.truncateMessagesIfNeeded()))},showNewMessageNoticeIfNeeded:function(){if(!this.state||!this.state.shouldShowNotice){var e=this.props.currentUserGuid,t=this._lastMessage||r.Map(),n=this._messageBoxElement&&this._messageBoxElement.scrollHeight||1,i=this._messageBoxElement&&this._messageBoxElement.clientHeight||1;e!==t.get("guid")&&t.get("approved")&&!t.get("spam")&&n/i>1.005&&this.showNotice()}},truncateMessagesIfNeeded:function(){var e,t=(this.state&&this.state.keys||r.List()).count(),n=this.isScrolledAtBottom(),i=parseInt(this.props.maxMessagesInStore,10),o=parseInt(this.props.messageTruncateBuffer,10),s=this._messageBoxElement.scrollTop/(this._messageBoxElement.scrollHeight||1)*t;(s=s>this._scrolledAtMessage?this._scrolledAtMessage:s)-o<=0||t<=i||0>(e=n?t-parseInt(i/2,10):s-o)||this.context.executeAction(d,{start:0,end:e})},scrollTo:function(e,t){this._messageBoxElement.scrollTop=e,isNaN(t)||(this._scrolledAtMessage=t)},scrollToBottom:function(){var e=this._messageBoxElement.clientHeight,t=this._messageBoxElement.scrollHeight,n=this.state&&this.state.keys&&this.state.keys.count();this.scrollTo(t-e,n)},isScrolledAtBottom:function(){var e=this._messageBoxElement&&this._messageBoxElement.clientHeight,t=this._messageBoxElement&&this._messageBoxElement.scrollHeight;return this._messageBoxElement.scrollTop+e===t},wasScrolledAtBottomBeforeUpdate:function(){var e=this._messageBoxElement&&this._messageBoxElement.clientHeight;return this._scrollTopBeforeUpdate+e===this._scrollHeightBeforeUpdate},showNotice:function(){this._type="NOTIFIED",this.setState({shouldShowNotice:!0})},hideNotice:function(){this.setState({shouldShowNotice:!1})},teardown:function(){this._messageBoxElement&&(this._messageBoxElement.removeEventListener("DOMMouseScroll",this.handleScroll),this._messageBoxElement.removeEventListener("mousewheel",this.handleScroll))}});e.exports=b},2548:function(e,t,n){"use strict";var i=n(1442),r=n(22),o=n(56).I13nButton,s=n(46),a=n(1),c=n(4),l=n(19),u=n(125).ComponentMixin,h=n(2525),d=n(2527),f=n(2096),p=n(76).FormattedMessage,_=n(94).Icon,g=c({displayName:"PromotedMessage",mixins:[l,u],statics:{storeListeners:[f]},getDefaultProps:function(){return{uuid:null,isLiveOn:!1,containerClass:null}},getStateOnChange:function(){var e=this.state||{},t=this.getStore(f).getPromotedMessage(),n=e.message||s.Map();return{message:t,shouldHidePromotedMessage:e.shouldHidePromotedMessage&&s.is(n,t)}},handleClose:function(){this.setState({message:this.state&&this.state.message,shouldHidePromotedMessage:!0})},render:function(){var e,t=this.state||{},n=t.message||s.Map(),c=n.get("guid"),l="editor"===c?a.createElement(p,{id:"MODERATOR"}):n.get("name"),u=n.get("image"),h=n.get("text"),d={color:this.props.linkColor||"#fff"},f=a.createElement("span",null,h);if("editor"===c){var g;(g=/(.*)\b(https?:\/\/?[\S]+)\b(.*)/gi.exec(h))&&(f=a.createElement("span",null,g[1],a.createElement("a",{style:d,href:g[2],target:"_blank",rel:"noopener noreferrer"},g[2]),g[3]))}return this.props.uuid&&!t.shouldHidePromotedMessage&&h?(e={rspns:"cl",t1:"a3",t2:"chat",t3:"ct",sec:"chat",slk:"close",elm:"btn",elmt:"cl",itc:"1",pkgt:"4"},a.createElement("div",{className:r("Pos(a) W(100%) Bxz(bb) Mih(51px) Py(8px) Pstart(57px) Pend(48px)",this.props.containerClass),style:{backgroundColor:this.props.backgroundColor}},a.createElement(i,{src:u,name:l,size:35,className:"Va(t) Pos(a) Start(12px) W(a)"}),a.createElement("div",{className:"D(ib) W(100%) Wow(bw) Lh(1.37) Fz(14px)"},l,": ",f),a.createElement(o,{className:"Pos(a) T(50%) Mt(-13px) End(15px) Cur(p) P(0) Bd(n)",style:{backgroundColor:"transparent"},onClick:this.handleClose,i13nModel:e},a.createElement(_,{name:"close",width:26,height:26,color:this.props.iconColor})))):a.createElement("div",null)},componentDidMount:function(){this.setupIfNeeded()},componentDidUpdate:function(){this.setupIfNeeded()},setupIfNeeded:function(){var e,t=this.props.uuid;t&&!this._hasLoadedAddedPromotedMessages&&(e=this.props.isLiveOn?h:d,this.context.executeAction(e,{uuid:t}),this._hasLoadedAddedPromotedMessages=!0)}});e.exports=g},2549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function s(){return i=I(n(2))}var a;function c(){return a=I(n(1))}var l;var u;function h(){return u=I(n(46))}var d;var f;var p;function _(){return p=I(n(525))}var g;function m(){return g=I(n(2097))}var v;function y(){return v=I(n(2536))}var E;var b;var S;var C;var k;var w;function I(e){return e&&e.__esModule?e:{default:e}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var O=function(e,t){var n=e.name;return"https://s.yimg.com/cv/ae"+e.prefix+"/"+t+"/"+n+".png"},P=function(e){j(t,(a||c()).default.Component);function t(e){x(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateCurrentCategoryId=n.updateCurrentCategoryId.bind(n),n}return o(t,[{key:"render",value:function(){var e=this.props,t=e.icon,i=void 0===t?{}:t,r=e.active,o=void 0!==r&&r,s=(0,(d||(d=I(n(22)))).default)("Pos(r) W(36px) H(100%) D(ib)",{"Bgc($c-fuji-grey-d)":o});return(a||c()).default.createElement("div",{className:s,onClick:this.updateCurrentCategoryId},(a||c()).default.createElement("img",{src:O(i,"s"),width:"30",className:"Pos(a) M(a) T(0) End(0) B(0) Start(0) Cur(p) H(a)"}))}},{key:"updateCurrentCategoryId",value:function(){var e=this.props.id;this.context.executeAction((S||(S=I(n(2537)))).default,{categoryId:e})}}]),t}();P.contextTypes={executeAction:(i||s()).default.func.isRequired};var A=function(e){j(t,(a||c()).default.Component);function t(e){x(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeStickerBox=n.closeStickerBox.bind(n),n}return o(t,[{key:"render",value:function(){var e=this.props,t=e.categories,i=void 0===t?(u||h()).default.List():t,o=e.currentCategoryId,s=i.toJS().map(function(e,t){return(a||c()).default.createElement(P,r({key:"StickerHeaderEntry-"+t},e,{active:e.id===o}))});return(a||c()).default.createElement("div",{className:"Pos(r) W(100%) H(36px) Pend(36px) Bxz(bb) Ov(h)"},s,(a||c()).default.createElement("div",{className:"Pos(a) W(36px) H(100%) D(ib) End(0) T(0)",onClick:this.closeStickerBox},(a||c()).default.createElement((f||(f=n(94))).Icon,{className:"Pos(a) M(a) T(0) End(0) B(0) Start(0)",name:"close",width:26,height:26,color:"#9f9f9f"})))}},{key:"closeStickerBox",value:function(){this.context.executeAction((k||(k=I(n(2095)))).default,{status:!1})}}]),t}();A.contextTypes={executeAction:(i||s()).default.func.isRequired};var F=function(e){j(t,(a||c()).default.Component);function t(e){x(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hidePreviewLayout=n.hidePreviewLayout.bind(n),n.sendSticker=n.sendSticker.bind(n),n}return o(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=void 0!==t&&t,i=e.previewStickerUrl;return n?(a||c()).default.createElement("div",{className:"Pos(a) T(0) Start(0) W(100%) H(100%) Bgc(white-overlay-light)",onClick:this.hidePreviewLayout},(a||c()).default.createElement("img",{src:i,width:"163",className:"Bxz(bb) P(8px) Bgc(white) Bdrs(3px) Pos(a) T(0) End(0) Start(0) B(0) M(a) Bd(preview-sticker) H(a)",onClick:this.sendSticker})):null}},{key:"hidePreviewLayout",value:function(){this.context.executeAction((v||y()).default,{status:!1})}},{key:"sendSticker",value:function(){var e=this.props,t=e.textInputData,i=void 0===t?{}:t,r=e.previewStickerUrl,o=e.previewStickerTitle,s=e.previewStickerPosition,a=e.currentCategoryId,c=e.i13n,l=e.lastSubmitTime,u=e.sendStickerCallback,h=i.uuid,d=i.moderationType,f=i.guid,p=i.image,_=i.nickName,g=i.selectedOptionId;l&&Date.now()-l<5e3||(this.context.executeAction((E||(E=I(n(2280)))).default,{uuid:h,moderationType:d,message:{guid:f,image:p,name:_,checkInOptionId:g,stickerSrc:r,stickerTitle:o}}),c&&c.executeEvent("beacon",{beaconType:"beaconClick",arguments:["sticker",a,s,{t1:"a3",t2:"vid",t3:"ct",elm:"btn",elmt:"cl",itc:"1",pkgt:"4",ct:"3"}]},function(){}),u&&u())}}]),t}();F.contextTypes={executeAction:(i||s()).default.func.isRequired};var U=function(e){j(t,(a||c()).default.Component);function t(e){x(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showPreviewLayout=n.showPreviewLayout.bind(n),n.redirectToSignIn=n.redirectToSignIn.bind(n),n}return o(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=void 0===t?{}:t,i=e.isSignedIn;return(a||c()).default.createElement("div",{className:"F(start) D(ib) W(25%) Mt(17px)"},(a||c()).default.createElement("img",{src:O(n,"m"),width:"72",className:"D(b) Mx(a) Cur(p) H(a)",onClick:i?this.showPreviewLayout:this.redirectToSignIn}))}},{key:"redirectToSignIn",value:function(){var e=this.props.signInUrl;(0,(w||(w=n(1416))).redirectToSignIn)(e)}},{key:"showPreviewLayout",value:function(){var e=this.props,t=e.icon,n=void 0===t?{}:t,i=e.index,r=e.stickerTitle;this.context.executeAction((v||y()).default,{status:!0,previewStickerTitle:r,previewStickerUrl:O(n,"l"),previewStickerPosition:i+1})}}]),t}();U.contextTypes={executeAction:(i||s()).default.func.isRequired};var M=function(e){j(t,(a||c()).default.Component);function t(){return x(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,[{key:"render",value:function(){var e=this.props,t=e.stickers,n=void 0===t?(u||h()).default.List():t,i=e.isSignedIn,r=e.signInUrl,o=n.toJS().map(function(e,t){return(a||c()).default.createElement(U,{key:"StickerBodyEntry-"+t,index:t,icon:e.icon,isSignedIn:i,stickerTitle:e.title,signInUrl:r})});return(a||c()).default.createElement("div",{className:"Bxz(bb) Px(15px) Pos(r) Pb(10px)"},o)}}]),t}(),D=function(e){j(t,(a||c()).default.Component);function t(e){x(this,t);var n=T(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sendStickerCallback=n.sendStickerCallback.bind(n),n}return o(t,[{key:"render",value:function(){var e=this.props,t=e.showStickerBox,n=e.showPreviewLayout,i=e.textInputData,r=e.categories,o=e.stickers,s=e.previewStickerUrl,l=e.previewStickerTitle,u=e.previewStickerPosition,h=e.isSignedIn,d=e.currentCategoryId,f=e.i13n;return t?(a||c()).default.createElement("div",{className:"Pos(a) W(100%) H(225px) Start(0) B(45px) Bgc($c-fuji-grey-b)"},(a||c()).default.createElement(A,{categories:r,currentCategoryId:d}),(a||c()).default.createElement("hr",{className:"W(100%) H(1px) Bgc($c-fuji-grey-d) Bd(0) M(0)"}),(a||c()).default.createElement("div",{className:"W(100%) H(188px) Ovy(a) Pos(r)"},(a||c()).default.createElement(M,{stickers:o,isSignedIn:h,signInUrl:i.signInUrl})),(a||c()).default.createElement(F,{currentCategoryId:d,sendStickerCallback:this.sendStickerCallback,show:n,textInputData:i,previewStickerUrl:s,previewStickerTitle:l,previewStickerPosition:u,lastSubmitTime:this._lastSubmitTime,i13n:f})):null}},{key:"sendStickerCallback",value:function(){this._lastSubmitTime=Date.now()}},{key:"componentDidMount",value:function(){this.props.hasFetchCategory||this.handleFetchingCategoryList()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.hasFetchCategory,i=e.categories,r=e.currentCategoryId;t||this.handleFetchingCategoryList(),i.size>0&&this.context.executeAction((C||(C=I(n(2535)))).default,{categoryId:r})}},{key:"handleFetchingCategoryList",value:function(){this.context.executeAction((b||(b=I(n(2534)))).default,{preload:3})}}]),t}();D.contextTypes={executeAction:(i||s()).default.func.isRequired},t.default=(0,(l||(l=n(125))).createImmutableContainer)(D,{stores:[(g||m()).default,(p||_()).default],ignore:["textInputData","i13n"],getStateFromStores:function(e,t){var n=e.getStore((g||m()).default),i=e.getStore((p||_()).default).isSignedIn(),r=n.getCategories(),o=n.getCurrentCategoryId(),s=n.hasFetchCategory(),a=n.getPreviewStickerUrl(),c=n.getPreviewStickerTitle(),l=n.getPreviewStickerPosition(),u=n.showPreviewLayout(),h=n.showStickerBox();return{categories:r,currentCategoryId:o,hasFetchCategory:s,isSignedIn:i,previewStickerUrl:a,previewStickerTitle:c,previewStickerPosition:l,stickers:n.getCurrentStickers(),showStickerBox:h,showPreviewLayout:u}}}),e.exports=t.default},2550:function(e,t,n){"use strict";var i=n(22),r=n(76).injectIntl,o=n(46),s=n(2),a=n(1),c=n(4),l=n(19),u=n(2280),h=n(2095),d=n(1442),f=n(2282),p=n(76).FormattedMessage,_=n(1416).redirectToSignIn,g=c({displayName:"Notice",mixins:[l],getDefaultProps:function(){return{isLiveOn:!1}},render:function(){var e,t;return this.props.isLiveOn?null:(e=a.createElement(p,{id:"LIVE_IS_ENDED"}),t={height:this.props.height},a.createElement("div",{className:"Pos(a) B(0) D(tb) H(45px) W(100%) Bgc($c-fuji-grey-e) Fz(14px) Ta(c)",style:t},a.createElement("div",{className:"D(tbc) Va(m)"},e)))}}),m=c({displayName:"TextInput",contextTypes:{session:s.object},mixins:[l],getDefaultProps:function(){return{isLiveOn:!1,isSignedIn:!1,ui:o.Map()}},redirectToSignIn:function(){_(this.props.signInUrl)},submitMessage:function(){var e,t=this.refs.textBox||{},n=t.value,i=this.props.guid,r=this.props.image,o=this.props.nickName,s=this.props.uuid,a=this.props.selectedOptionId,c=this.props.moderationType,l=this.props.messageSubmitInterval,h=this.props.i13n;n&&(n=n.trim()),n&&i&&s&&(n!==this._lastMessage?this._lastSubmitTime&&Date.now()-this._lastSubmitTime<1e3*l||(this.context.executeAction(u,{uuid:s,moderationType:c,message:{guid:i,image:r,name:o,text:t.value,checkInOptionId:a}}),h&&h.executeEvent&&(e={t1:"a3",t2:"chat",t3:"ct",elm:"btn",elmt:"post",itc:"1",pkgt:"4"},h.executeEvent("beacon",{beaconType:"beaconClick",arguments:["chat","post",0,e]},function(){})),this._lastMessage=n,this._lastSubmitTime=Date.now(),t.value=""):t.value="")},handleKeyPress:function(e){13===e.charCode&&this.submitMessage()},toggleStickerBox:function(){this.context.executeAction(h,{status:"toggle"})},render:function(){var e=this.props.isSignedIn,t=e&&this.props.showTextInputAvatar,n=this.props.showCheckInBadge,r=e?"SEND_A_MESSAGE":"PLEASE_SIGN_IN_TO_CHAT",o=this.props.intl.formatMessage({id:r}),s=e?function(){}:this.redirectToSignIn,c=e?this.submitMessage:this.redirectToSignIn,l=this.props.ui,u=this.props.avatar,h=l.get("textInputHeight","45px"),_={height:h},m=i("Pos(a) B(0) D(tb) W(100%) Bxz(bb)",l.get("textInputContainerClass","")),v=i("H(33px) W(100%) Fz(14px) Bdrs(3px) Bxz(bb) Pstart(6px) Pend(28px)",l.get("textInputClass","")),y=i("Ta(c) Bdrs(3px) Cur(p) W(100%) Pt(3px) Pb(7px) Px(0)",l.get("submitButtonClass",""));return this.props.isLiveOn?a.createElement("div",{className:m,style:_},t?a.createElement("div",{className:"D(tbc) Va(m) Pstart(7px) W(43px)"},n?a.createElement(f,u):a.createElement(d,u)):null,a.createElement("div",{className:"D(tbc) Pend(6px) Va(m) Pos(r)"},a.createElement("input",{type:"text",className:v,ref:"textBox",onKeyPress:this.handleKeyPress,onFocus:s,maxLength:140,placeholder:o}),a.createElement("img",{src:"https://s.yimg.com/dh/ap/default/170214/icon-sticker-gray-copy-5.png",width:"22",height:"22",className:"Pos(a) M(a) T(a) B(a) End(11px) Cur(p) Py(6px)",onClick:this.toggleStickerBox})),a.createElement("div",{className:"D(tbc) Va(m)"},a.createElement("button",{className:y,onClick:c},a.createElement("div",{className:"D(ib) Va(m) C(white) Fz(12px) Px(2px)"},a.createElement(p,{id:"SUBMIT"}))))):a.createElement(g,{isLiveOn:!1,height:h})}});e.exports=r(m)},2551:function(e,t,n){"use strict";var i=n(1),r=n(4)({displayName:"CheerMegaphone",getDefaultProps:function(){return{isSoundOn:!0,isFlipped:!1,isPale:!1,size:42,color:"#fff",className:""}},render:function(){var e=this.props.isSoundOn?i.createElement("g",null,i.createElement("rect",{x:"16.2",y:"0",width:"3.6",height:"7.04680851",rx:"1.8"}),i.createElement("rect",{transform:"translate(30.358846, 7.455613) rotate(-330.000000) translate(-30.358846, -7.455613)",x:"28.5588457",y:"3.93220866",width:"3.6",height:"7.04680851",rx:"1.8"}),i.createElement("rect",{transform:"translate(38.198530, 16.954151) rotate(-290.000000) translate(-38.198530, -16.954151)",x:"36.3985297",y:"13.4307465",width:"3.6",height:"7.04680851",rx:"1.8"})):null,t=this.props.isSoundOn?"0 0 42 40":this.props.isFlipped?"13 11 29 29":"0 11 29 29",n=this.props.isFlipped?"translate(42,0) scale(-1,1)":"",r="M23.480102,28.560135 C22.3037653,29.7635777 18.8431963,27.9253923 15.7513555,24.4517356 C12.6603702,20.9762444 11.1067502,17.1861337 12.2839425,15.982691 C13.4594237,14.778331 16.9199927,16.6174336 20.012689,20.0920076 C23.1045298,23.5656642 24.6572943,27.3566922 23.480102,28.560135 M13.7521986,30.6142861 C13.6254673,30.8446162 12.8983202,30.666537 12.1296218,30.2186729 C11.3609234,29.7697425 10.8404938,29.2205759 10.9672252,28.9902458 C11.0939565,28.7609821 11.8200649,28.9390613 12.589802,29.3879917 C13.3574616,29.8358558 13.87893,30.3850224 13.7521986,30.6142861 M10.5361308,27.3853996 C10.3127928,27.2553058 10.4852305,26.5099321 10.9225576,25.7197719 C11.3598846,24.9306781 11.8948571,24.395374 12.1181952,24.5265341 C12.3415332,24.6555616 12.1680567,25.4030681 11.7317684,26.1910955 C11.2954802,26.9812557 10.7594689,27.5154935 10.5361308,27.3853996 M10.4904244,28.6372863 C10.3377235,28.9145355 9.99388683,29.0105063 9.72276483,28.8537539 C9.4537204,28.6959351 9.3581525,28.3429756 9.51189217,28.0667928 C9.66563185,27.7884773 10.0094686,27.6914401 10.2795518,27.8492588 C10.549635,28.0070776 10.6441641,28.3589708 10.4904244,28.6372863 M9.01639335,31.0984059 C8.5790663,31.888566 8.04409379,32.4228038 7.82075574,32.2916436 C7.5974177,32.1604835 7.76985545,31.4161761 8.20718249,30.6270823 C8.64450954,29.8369221 9.17948206,29.3026843 9.4028201,29.4338445 C9.62615815,29.562872 9.4537204,30.3082457 9.01639335,31.0984059 M6.1867523,26.2038916 C6.31348366,25.9746279 7.04063077,26.1516408 7.80932915,26.6005712 C8.5790663,27.0495016 9.0984571,27.5986682 8.97172574,27.827932 C8.84499439,28.0571957 8.11888606,27.8801828 7.35018768,27.4312524 C6.58148931,26.982322 6.06002095,26.432089 6.1867523,26.2038916 M22.1673683,19.2982546 C16.1299697,11.899967 11.3256048,12.5664314 10.6763663,13.4333682 L0.288550441,36.4930349 C0.288550441,36.4930349 -0.360688052,38.4252484 0.288550441,39.1588924 L0.937788935,39.6248842 C0.937788935,39.6248842 1.91112728,40.4246415 4.11853816,39.0917128 L25.9983948,29.0947474 C25.9983948,29.0947474 28.2058056,26.6954757 22.1673683,19.2982546",o=this.props.isPale?i.createElement("g",{transform:n,fill:"#fff",opacity:"0.7"},i.createElement("path",{d:r}),e):null;return i.createElement("svg",{width:this.props.size,height:this.props.size,style:this.props.style,className:this.props.className,viewBox:t},i.createElement("g",{transform:n,fill:this.props.color},i.createElement("path",{d:r}),e),o)}});e.exports=r},2552:function(e,t,n){(function(n,i){var r;
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){var o={};function s(){}function a(e){return e}function c(e){return!!e}function l(e){return!e}var u,h="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=h&&(u=h.async),o.noConflict=function(){return h.async=u,o};function d(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function f(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}var p=Object.prototype.toString,_=Array.isArray||function(e){return"[object Array]"===p.call(e)};function g(e){return _(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function m(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function v(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function y(e){return v(Array(e),function(e,t){return t})}function E(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var b=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};function S(e){var t,n,i=-1;return g(e)?(t=e.length,function(){return++i<t?i:null}):(n=b(e),t=n.length,function(){return++i<t?n[i]:null})}function C(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i)}}}function k(e){return function(t,n,i){return e(t,i)}}var w="function"==typeof setImmediate&&setImmediate,I=w?function(e){w(e)}:function(e){setTimeout(e,0)};"object"==typeof i&&"function"==typeof i.nextTick?o.nextTick=i.nextTick:o.nextTick=I,o.setImmediate=w?I:o.nextTick,o.forEach=o.each=function(e,t,n){return o.eachOf(e,k(t),n)},o.forEachSeries=o.eachSeries=function(e,t,n){return o.eachOfSeries(e,k(t),n)},o.forEachLimit=o.eachLimit=function(e,t,n,i){return x(t)(e,k(n),i)},o.forEachOf=o.eachOf=function(e,t,n){n=f(n||s);for(var i,r=S(e=e||[]),o=0;null!=(i=r());)o+=1,t(e[i],i,d(a));0===o&&n(null);function a(e){o--,e?n(e):null===i&&o<=0&&n(null)}},o.forEachOfSeries=o.eachOfSeries=function(e,t,n){n=f(n||s);var i=S(e=e||[]),r=i();!function s(){var a=!0;if(null===r)return n(null);t(e[r],r,d(function(e){if(e)n(e);else{if(null===(r=i()))return n(null);a?o.setImmediate(s):s()}})),a=!1}()},o.forEachOfLimit=o.eachOfLimit=function(e,t,n,i){x(t)(e,n,i)};function x(e){return function(t,n,i){i=f(i||s);var r=S(t=t||[]);if(e<=0)return i(null);var o=!1,a=0,c=!1;!function s(){if(o&&a<=0)return i(null);for(;a<e&&!c;){var l=r();if(null===l)return o=!0,void(a<=0&&i(null));a+=1,n(t[l],l,d(function(e){a-=1,e?(i(e),c=!0):s()}))}}()}}function T(e){return function(t,n,i){return e(o.eachOf,t,n,i)}}function j(e){return function(t,n,i,r){return e(x(n),t,i,r)}}function O(e){return function(t,n,i){return e(o.eachOfSeries,t,n,i)}}function P(e,t,n,i){i=f(i||s);var r=g(t=t||[])?[]:{};e(t,function(e,t,i){n(e,function(e,n){r[t]=n,i(e)})},function(e){i(e,r)})}o.map=T(P),o.mapSeries=O(P),o.mapLimit=j(P),o.inject=o.foldl=o.reduce=function(e,t,n,i){o.eachOfSeries(e,function(e,i,r){n(t,e,function(e,n){t=n,r(e)})},function(e){i(e,t)})},o.foldr=o.reduceRight=function(e,t,n,i){var r=v(e,a).reverse();o.reduce(r,t,n,i)},o.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=_(e)?[]:{}),o.eachOf(e,function(e,i,r){n(t,e,i,r)},function(e){i(e,t)})};function A(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(n){n&&r.push({index:t,value:e}),i()})},function(){i(v(r.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}o.select=o.filter=T(A),o.selectLimit=o.filterLimit=j(A),o.selectSeries=o.filterSeries=O(A);function F(e,t,n,i){A(e,t,function(e,t){n(e,function(e){t(!e)})},i)}o.reject=T(F),o.rejectLimit=j(F),o.rejectSeries=O(F);function U(e,t,n){return function(i,r,o,s){function a(){s&&s(n(!1,void 0))}function c(e,i,r){if(!s)return r();o(e,function(i){s&&t(i)&&(s(n(!0,e)),s=o=!1),r()})}arguments.length>3?e(i,r,c,a):(s=o,o=r,e(i,c,a))}}o.any=o.some=U(o.eachOf,c,a),o.someLimit=U(o.eachOfLimit,c,a),o.all=o.every=U(o.eachOf,l,l),o.everyLimit=U(o.eachOfLimit,l,l);function M(e,t){return t}o.detect=U(o.eachOf,a,M),o.detectSeries=U(o.eachOfSeries,a,M),o.detectLimit=U(o.eachOfLimit,a,M),o.sortBy=function(e,t,n){o.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){if(e)return n(e);n(null,v(t.sort(i),function(e){return e.value}))});function i(e,t){var n=e.criteria,i=t.criteria;return n<i?-1:n>i?1:0}},o.auto=function(e,t,n){"function"==typeof arguments[1]&&(n=t,t=null),n=f(n||s);var i=b(e),r=i.length;if(!r)return n(null);t||(t=r);var a={},c=0,l=!1,u=[];function h(e){u.unshift(e)}function d(){r--,m(u.slice(0),function(e){e()})}h(function(){r||n(null,a)}),m(i,function(i){if(!l){for(var r,s=_(e[i])?e[i]:[e[i]],f=C(function(e,t){if(c--,t.length<=1&&(t=t[0]),e){var r={};u=function(e,t){r[t]=e},m(b(s=a),function(e){u(s[e],e)}),r[i]=t,l=!0,n(e,r)}else a[i]=t,o.setImmediate(d);var s,u}),p=s.slice(0,s.length-1),g=p.length;g--;){if(!(r=e[p[g]]))throw new Error("Has nonexistent dependency in "+p.join(", "));if(_(r)&&E(r,i)>=0)throw new Error("Has cyclic dependencies")}v()?(c++,s[s.length-1](f,a)):h(y)}function v(){return c<t&&(e=p,n=function(e,t){return e&&a.hasOwnProperty(t)},r=!0,m(e,function(e,t,i){r=n(r,e,t,i)}),r)&&!a.hasOwnProperty(i);var e,n,r}function y(){v()&&(c++,function(e){var t=E(u,e);t>=0&&u.splice(t,1)}(y),s[s.length-1](f,a))}})},o.retry=function(e,t,n){var i=5,r=0,s=[],a={times:i,interval:r};var c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");c<=2&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||i,e.interval=parseInt(t.interval,10)||r}}(a,e),a.callback=n,a.task=t;function l(e,t){function n(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}function i(e){return function(t){setTimeout(function(){t(null)},e)}}for(;a.times;){var r=!(a.times-=1);s.push(n(a.task,r)),!r&&a.interval>0&&s.push(i(a.interval))}o.series(s,function(t,n){n=n[n.length-1],(e||a.callback)(n.err,n.result)})}return a.callback?l():l},o.waterfall=function(e,t){if(t=f(t||s),!_(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();!function e(n){return C(function(i,r){if(i)t.apply(null,[i].concat(r));else{var o=n.next();o?r.push(e(o)):r.push(t),W(n).apply(null,r)}})}(o.iterator(e))()};function D(e,t,n){n=n||s;var i=g(t)?[]:{};e(t,function(e,t,n){e(C(function(e,r){r.length<=1&&(r=r[0]),i[t]=r,n(e)}))},function(e){n(e,i)})}o.parallel=function(e,t){D(o.eachOf,e,t)},o.parallelLimit=function(e,t,n){D(x(t),e,n)},o.series=function(e,t){D(o.eachOfSeries,e,t)},o.iterator=function(e){return function t(n){function i(){return e.length&&e[n].apply(null,arguments),i.next()}return i.next=function(){return n<e.length-1?t(n+1):null},i}(0)},o.apply=C(function(e,t){return C(function(n){return e.apply(null,t.concat(n))})});function R(e,t,n,i){var r=[];e(t,function(e,t,i){n(e,function(e,t){r=r.concat(t||[]),i(e)})},function(e){i(e,r)})}o.concat=T(R),o.concatSeries=O(R),o.whilst=function(e,t,n){if(n=n||s,e()){var i=C(function(r,o){r?n(r):e.apply(this,o)?t(i):n.apply(null,[null].concat(o))});t(i)}else n(null)},o.doWhilst=function(e,t,n){var i=0;return o.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},o.until=function(e,t,n){return o.whilst(function(){return!e.apply(this,arguments)},t,n)},o.doUntil=function(e,t,n){return o.doWhilst(e,function(){return!t.apply(this,arguments)},n)},o.during=function(e,t,n){n=n||s;var i=C(function(t,i){t?n(t):(i.push(r),e.apply(this,i))}),r=function(e,r){e?n(e):r?t(i):n(null)};e(r)},o.doDuring=function(e,t,n){var i=0;o.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)};function N(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function i(e,t,n,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(e.started=!0,_(t)||(t=[t]),0===t.length&&e.idle())return o.setImmediate(function(){e.drain()});m(t,function(t){var r={data:t,callback:i||s};n?e.tasks.unshift(r):e.tasks.push(r),e.tasks.length===e.concurrency&&e.saturated()}),o.setImmediate(e.process)}function r(e,t){return function(){a-=1;var n=!1,i=arguments;m(t,function(e){m(c,function(t,i){t!==e||n||(c.splice(i,1),n=!0)}),e.callback.apply(e,i)}),e.tasks.length+a===0&&e.drain(),e.process()}}var a=0,c=[],l={tasks:[],concurrency:t,payload:n,saturated:s,empty:s,drain:s,started:!1,paused:!1,push:function(e,t){i(l,e,!1,t)},kill:function(){l.drain=s,l.tasks=[]},unshift:function(e,t){i(l,e,!0,t)},process:function(){for(;!l.paused&&a<l.concurrency&&l.tasks.length;){var t=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),n=v(t,function(e){return e.data});0===l.tasks.length&&l.empty(),a+=1,c.push(t[0]);var i=d(r(l,t));e(n,i)}},length:function(){return l.tasks.length},running:function(){return a},workersList:function(){return c},idle:function(){return l.tasks.length+a===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var e=Math.min(l.concurrency,l.tasks.length),t=1;t<=e;t++)o.setImmediate(l.process)}}};return l}o.queue=function(e,t){return N(function(t,n){e(t[0],n)},t,1)},o.priorityQueue=function(e,t){function n(e,t){return e.priority-t.priority}var i=o.queue(e,t);return i.push=function(e,t,r){!function(e,t,i,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(e.started=!0,_(t)||(t=[t]),0===t.length)return o.setImmediate(function(){e.drain()});m(t,function(t){var a={data:t,priority:i,callback:"function"==typeof r?r:s};e.tasks.splice(function(e,t,n){for(var i=-1,r=e.length-1;i<r;){var o=i+(r-i+1>>>1);n(t,e[o])>=0?i=o:r=o-1}return i}(e.tasks,a,n)+1,0,a),e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)})}(i,e,t,r)},delete i.unshift,i},o.cargo=function(e,t){return N(e,1,t)};function L(e){return C(function(t,n){t.apply(null,n.concat([C(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&m(n,function(t){console[e](t)}))})]))})}o.log=L("log"),o.dir=L("dir"),o.memoize=function(e,t){var n={},i={},r=Object.prototype.hasOwnProperty;t=t||a;var s=C(function(s){var a=s.pop(),c=t.apply(null,s);r.call(n,c)?o.setImmediate(function(){a.apply(null,n[c])}):r.call(i,c)?i[c].push(a):(i[c]=[a],e.apply(null,s.concat([C(function(e){n[c]=e;var t=i[c];delete i[c];for(var r=0,o=t.length;r<o;r++)t[r].apply(null,e)})])))});return s.memo=n,s.unmemoized=e,s},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}};function B(e){return function(t,n,i){e(y(t),n,i)}}o.times=B(o.map),o.timesSeries=B(o.mapSeries),o.timesLimit=function(e,t,n,i){return o.mapLimit(y(e),t,n,i)},o.seq=function(){var e=arguments;return C(function(t){var n=this,i=t[t.length-1];"function"==typeof i?t.pop():i=s,o.reduce(e,t,function(e,t,i){t.apply(n,e.concat([C(function(e,t){i(e,t)})]))},function(e,t){i.apply(n,[e].concat(t))})})},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};function H(e){return C(function(t,n){var i=C(function(n){var i=this,r=n.pop();return e(t,function(e,t,r){e.apply(i,n.concat([r]))},r)});return n.length?i.apply(this,n):i})}o.applyEach=H(o.eachOf),o.applyEachSeries=H(o.eachOfSeries),o.forever=function(e,t){var n=d(t||s),i=W(e);!function e(t){if(t)return n(t);i(e)}()};function W(e){return C(function(t){var n=t.pop();t.push(function(){var e=arguments;i?o.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}o.ensureAsync=W,o.constant=C(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),o.wrapSync=o.asyncify=function(e){return C(function(t){var n,i=t.pop();try{n=e.apply(this,t)}catch(e){return i(e)}!function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}(n)||"function"!=typeof n.then?i(null,n):n.then(function(e){i(null,e)}).catch(function(e){i(e.message?e:new Error(e))})})},"object"==typeof e&&e.exports?e.exports=o:void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}).call(t,n(31),n(47))}});